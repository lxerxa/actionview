webpackJsonp([22],{41:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=t.Checkbox=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(1),l=n(i);t.Checkbox=l.default.createClass({displayName:"Checkbox",contextTypes:{checkboxGroup:l.default.PropTypes.object.isRequired},componentWillMount:function(){if(!this.context||!this.context.checkboxGroup)throw new Error("The `Checkbox` component must be used as a child of `CheckboxGroup`.")},render:function(){var e=this.context.checkboxGroup,t=e.name,a=e.checkedValues,n=e.onChange,r={};return a&&(r.checked=a.indexOf(this.props.value)>=0),"function"==typeof n&&(r.onChange=n.bind(null,this.props.value)),l.default.createElement("input",o({},this.props,{type:"checkbox",name:t},r))}}),t.CheckboxGroup=l.default.createClass({displayName:"CheckboxGroup",propTypes:{name:i.PropTypes.string,defaultValue:i.PropTypes.array,value:i.PropTypes.array,onChange:i.PropTypes.func,children:i.PropTypes.node.isRequired,Component:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.func,i.PropTypes.object])},getDefaultProps:function(){return{Component:"div"}},childContextTypes:{checkboxGroup:l.default.PropTypes.object},getChildContext:function(){return{checkboxGroup:{name:this.props.name,checkedValues:this.state.value,onChange:this._onCheckboxChange}}},getInitialState:function(){return{value:this.props.value||this.props.defaultValue||[]}},componentWillReceiveProps:function(e){e.value&&this.setState({value:e.value})},render:function(){var e=this.props,t=e.Component,a=(e.name,e.value,e.onChange,e.children),n=r(e,["Component","name","value","onChange","children"]);return l.default.createElement(t,n,a)},getValue:function(){return this.state.value},_isControlledComponent:function(){return!!this.props.value},_onCheckboxChange:function(e,t){var a;a=t.target.checked?this.state.value.concat(e):this.state.value.filter(function(t){return t!==e}),this._isControlledComponent()?this.setState({value:this.props.value}):this.setState({value:a}),"function"==typeof this.props.onChange&&this.props.onChange(a)}})},1069:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,o=t,i=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=i,n=!0,l=c=void 0}},s=a(1),c=n(s),u=(a(8),a(2)),d=a(3),p=(n(d),a(5)),h=a(1695),f=n(h),m=a(94),v=a(4),g=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0,src:"",cropResult:null},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}return o(t,e),i(t,[{key:"onChange",value:function(e){var t=this;e.preventDefault();var a=void 0;e.dataTransfer?a=e.dataTransfer.files:e.target&&(a=e.target.files);var n=new FileReader;n.onload=function(){t.setState({src:n.result})},n.readAsDataURL(a[0])}},{key:"handleSubmit",value:function(){var e,t,a,n,r,o,i,l,s;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.props,t=e.setAvatar,a=e.updAvatar,n=e.close,r=this.refs.cropper.getCroppedCanvas().toDataURL()||"",o=r.indexOf("base64")+7,i=r.substr(o),c.next=9,regeneratorRuntime.awrap(t({data:i}));case 9:l=c.sent,0===l?(this.setState({ecode:0}),n(),p.notify.show("设置完成。","success",2e3),s=this.props.data,s&&s.avatar&&a(s.avatar)):this.setState({ecode:l});case 11:case"end":return c.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.loading;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.loading;return c.default.createElement(u.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(u.Modal.Header,{closeButton:!0},c.default.createElement(u.Modal.Title,{id:"contained-modal-title-la"},"设置头像")),c.default.createElement(u.Modal.Body,{style:{height:"420px",overflow:"hidden"}},c.default.createElement("div",{style:{marginBottom:"15px"}},c.default.createElement("a",{className:"upload-img"},"选择头像",c.default.createElement("input",{type:"file",onChange:this.onChange.bind(this)})),c.default.createElement("span",{style:{marginLeft:"20px",fontSize:"12px"}},"提示：不支持IE9及以下版本")),c.default.createElement(u.Form,{horizontal:!0},c.default.createElement(u.FormGroup,{controlId:"formControlsText"},c.default.createElement(u.Col,{sm:8},c.default.createElement("div",{className:"avatar-edit-container"},c.default.createElement(f.default,{ref:"cropper",style:{height:300,width:"100%"},aspectRatio:1,preview:".preview-img",guides:!1,src:this.state.src}),c.default.createElement("img",{style:{opacity:0}}))),c.default.createElement(u.Col,{sm:4},c.default.createElement("div",{className:"preview-img"},c.default.createElement("img",{src:m,style:{width:"120px"}})))))),c.default.createElement(u.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!a&&t[this.state.ecode]),c.default.createElement("img",{src:v,className:a?"loading":"hide"}),c.default.createElement(u.Button,{disabled:a,onClick:this.handleSubmit},"确定"),c.default.createElement(u.Button,{bsStyle:"link",disabled:a,onClick:this.handleCancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,data:s.PropTypes.object.isRequired,loading:s.PropTypes.bool.isRequired,setAvatar:s.PropTypes.func.isRequired,updAvatar:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1070:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,o=t,i=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=i,n=!0,l=c=void 0}},c=a(1),u=n(c),d=a(8),p=a(2),h=a(3),f=n(h),m=a(5),v=a(4),g=function(e,t){var a={};if(e.password||(a.password="必填"),e.new_password){var n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^ ]{8,}$/;n.test(e.new_password)||(a.new_password="密码必须包含字母大小写、数字，至少8位")}else a.new_password="必填";return e.new_password2||(a.new_password2="必填"),(e.new_password||e.new_password2)&&e.new_password!=e.new_password2&&(a.new_password2="密码不一致"),a},y=function(e){function t(e){r(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}o(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,a,n,r,o;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.values,a=e.resetPwd,n=e.close,r=e.reLogin,i.next=7,regeneratorRuntime.awrap(a(f.default.pick(t,["password","new_password"])));case 7:o=i.sent,this.setState({ecode:o}),0===o&&(n(),m.notify.show("密码已修改, 请重新登录。","success",2e3),r());case 10:case"end":return i.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.password,r=a.new_password,o=a.new_password2,l=e.handleSubmit,s=e.invalid,c=e.submitting;return u.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(p.Modal.Header,{closeButton:!0},u.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"重置密码")),u.default.createElement("form",{onSubmit:l(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(p.Modal.Body,null,u.default.createElement(p.FormGroup,{controlId:"formControlsSrc",validationState:n.touched&&n.error?"error":null},u.default.createElement(p.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"原密码"),u.default.createElement(p.FormControl,i({disabled:c,type:"password"},n,{placeholder:"原密码"})),n.touched&&n.error&&u.default.createElement(p.HelpBlock,{style:{"float":"right"}},n.error)),u.default.createElement(p.FormGroup,{controlId:"formControlsNew",validationState:r.touched&&r.error?"error":null},u.default.createElement(p.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"新密码"),u.default.createElement(p.FormControl,i({disabled:c,type:"password"},r,{placeholder:"新密码必须包含字母大小写、数字，至少8位"})),r.touched&&r.error&&u.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),u.default.createElement(p.FormGroup,{controlId:"formControlsNew2",validationState:o.touched&&o.error?"error":null},u.default.createElement(p.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"确认密码"),u.default.createElement(p.FormControl,i({disabled:c,type:"password"},o,{placeholder:"确认密码"})),o.touched&&o.error&&u.default.createElement(p.HelpBlock,{style:{"float":"right"}},o.error))),u.default.createElement(p.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!c&&t[this.state.ecode]),u.default.createElement("img",{src:v,className:c?"loading":"hide"}),u.default.createElement(p.Button,{disabled:c||s,type:"submit"},"确定"),u.default.createElement(p.Button,{bsStyle:"link",disabled:c,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:c.PropTypes.object.isRequired,submitting:c.PropTypes.bool,invalid:c.PropTypes.bool,values:c.PropTypes.object,fields:c.PropTypes.object,handleSubmit:c.PropTypes.func.isRequired,close:c.PropTypes.func.isRequired,reLogin:c.PropTypes.func.isRequired,resetPwd:c.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"mysetting",fields:["password","new_password","new_password2"],validate:g})(t)||t}(c.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1443:function(e,t,a){!function(t,a){e.exports=a()}(this,function(){"use strict";function e(e){return ie.call(e).slice(8,-1).toLowerCase()}function t(e){return"number"==typeof e&&!isNaN(e)}function a(e){return"undefined"==typeof e}function n(e){return"object"===("undefined"==typeof e?"undefined":U(e))&&null!==e}function r(e){if(!n(e))return!1;try{var t=e.constructor,a=t.prototype;return t&&a&&le.call(a,"isPrototypeOf")}catch(r){return!1}}function o(t){return"function"===e(t)}function i(t){return Array.isArray?Array.isArray(t):"array"===e(t)}function l(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(te,"$1")),e}function s(e,a){if(e&&o(a)){var r=void 0;if(i(e)||t(e.length)){var l=e.length;for(r=0;r<l&&a.call(e,e[r],r,e)!==!1;r++);}else n(e)&&Object.keys(e).forEach(function(t){a.call(e,e[t],t,e)})}return e}function c(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];if(n(e)&&a.length>0){if(Object.assign)return Object.assign.apply(Object,[e].concat(a));a.forEach(function(t){n(t)&&Object.keys(t).forEach(function(a){e[a]=t[a]})})}return e}function u(e,t){for(var a=arguments.length,n=Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];return function(){for(var a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];return e.apply(t,n.concat(r))}}function d(e,a){var n=e.style;s(a,function(e,a){ee.test(a)&&t(e)&&(e+="px"),n[a]=e})}function p(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function h(e,a){if(a){if(t(e.length))return void s(e,function(e){h(e,a)});if(e.classList)return void e.classList.add(a);var n=l(e.className);n?n.indexOf(a)<0&&(e.className=n+" "+a):e.className=a}}function f(e,a){if(a)return t(e.length)?void s(e,function(e){f(e,a)}):e.classList?void e.classList.remove(a):void(e.className.indexOf(a)>=0&&(e.className=e.className.replace(a,"")))}function m(e,a,n){if(a)return t(e.length)?void s(e,function(e){m(e,a,n)}):void(n?h(e,a):f(e,a))}function v(e){return e.replace(Q,"$1-$2").toLowerCase()}function g(e,t){return n(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+v(t))}function y(e,t,a){n(a)?e[t]=a:e.dataset?e.dataset[t]=a:e.setAttribute("data-"+v(t),a)}function b(e,t){if(n(e[t]))delete e[t];else if(e.dataset)try{delete e.dataset[t]}catch(a){e.dataset[t]=null}else e.removeAttribute("data-"+v(t))}function w(e,t,a){var n=l(t).split(J);return n.length>1?void s(n,function(t){w(e,t,a)}):void(e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent&&e.detachEvent("on"+t,a))}function C(e,t,a,n){var r=l(t).split(J),o=a;return r.length>1?void s(r,function(t){C(e,t,a)}):(n&&(a=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return w(e,t,a),o.apply(e,r)}),void(e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)))}function x(e,t,n){if(e.dispatchEvent){var r=void 0;return o(Event)&&o(CustomEvent)?r=a(n)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):a(n)?(r=document.createEvent("Event"),r.initEvent(t,!0,!0)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(r)}return!e.fireEvent||e.fireEvent("on"+t)}function E(e){var a=e||window.event;if(a.target||(a.target=a.srcElement||document),!t(a.pageX)&&t(a.clientX)){var n=e.target.ownerDocument||document,r=n.documentElement,o=n.body;a.pageX=a.clientX+((r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0)),a.pageY=a.clientY+((r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0))}return a}function T(e){var t=document.documentElement,a=e.getBoundingClientRect();return{left:a.left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),top:a.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}}function M(e,t){return e.getElementsByTagName(t)}function k(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function O(e){return document.createElement(e)}function P(e,t){e.appendChild(t)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function S(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function _(e){var t=e.match(Z);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function R(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function N(e,t){if(e.naturalWidth&&!re)return void t(e.naturalWidth,e.naturalHeight);var a=O("img");a.onload=function(){t(this.width,this.height)},a.src=e.src}function j(e){var a=[],n=e.translateX,r=e.translateY,o=e.rotate,i=e.scaleX,l=e.scaleY;t(n)&&0!==n&&a.push("translateX("+n+"px)"),t(r)&&0!==r&&a.push("translateY("+r+"px)"),t(o)&&0!==o&&a.push("rotate("+o+"deg)"),t(i)&&1!==i&&a.push("scaleX("+i+")"),t(l)&&1!==l&&a.push("scaleY("+l+")");var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function B(e,t){var a=Math.abs(e.degree)%180,n=(a>90?180-a:a)*Math.PI/180,r=Math.sin(n),o=Math.cos(n),i=e.width,l=e.height,s=e.aspectRatio,c=void 0,u=void 0;return t?(c=i/(o+r/s),u=c/s):(c=i*o+l*r,u=i*r+l*o),{width:c,height:u}}function A(e,a,n){var r=O("canvas"),o=r.getContext("2d"),i=0,l=0,s=a.naturalWidth,c=a.naturalHeight,u=a.rotate,d=a.scaleX,p=a.scaleY,h=t(d)&&t(p)&&(1!==d||1!==p),f=t(u)&&0!==u,m=f||h,v=s*Math.abs(d||1),g=c*Math.abs(p||1),y=void 0,b=void 0,w=void 0;return h&&(y=v/2,b=g/2),f&&(w=B({width:v,height:g,degree:u}),v=w.width,g=w.height,y=v/2,b=g/2),r.width=v,r.height=g,n.fillColor&&(o.fillStyle=n.fillColor,o.fillRect(0,0,v,g)),m&&(i=-s/2,l=-c/2,o.save(),o.translate(y,b)),f&&o.rotate(u*Math.PI/180),h&&o.scale(d,p),o.imageSmoothingEnabled=!!n.imageSmoothingEnabled,n.imageSmoothingQuality&&(o.imageSmoothingQuality=n.imageSmoothingQuality),o.drawImage(e,Math.floor(i),Math.floor(l),Math.floor(s),Math.floor(c)),m&&o.restore(),r}function L(e,t,a){var n="",r=t;for(a+=t;r<a;r++)n+=se(e.getUint8(r));return n}function H(e){var t=new DataView(e),a=t.byteLength,n=void 0,r=void 0,o=void 0,i=void 0,l=void 0,s=void 0,c=void 0,u=void 0,d=void 0,p=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(d=2;d<a;){if(255===t.getUint8(d)&&225===t.getUint8(d+1)){c=d;break}d++}if(c&&(r=c+4,o=c+10,"Exif"===L(t,r,4)&&(s=t.getUint16(o),l=18761===s,(l||19789===s)&&42===t.getUint16(o+2,l)&&(i=t.getUint32(o+4,l),i>=8&&(u=o+i)))),u)for(a=t.getUint16(u,l),p=0;p<a;p++)if(d=u+12*p+2,274===t.getUint16(d,l)){d+=8,n=t.getUint16(d,l),re&&t.setUint16(d,1,l);break}return n}function W(e){var t=e.replace($,""),a=atob(t),n=a.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=void 0;for(i=0;i<n;i++)o[i]=a.charCodeAt(i);return r}function q(e){var t=new Uint8Array(e),a=t.length,n="",r=void 0;for(r=0;r<a;r++)n+=se(t[r]);return"data:image/jpeg;base64,"+btoa(n)}function Y(e,t){var a=e.pageX,n=e.pageY,r={endX:a,endY:n};return t?r:c({startX:a,startY:n},r)}function z(e){var t=c({},e),a=[];return s(e,function(e,n){delete t[n],s(t,function(t){var n=Math.abs(e.startX-t.startX),r=Math.abs(e.startY-t.startY),o=Math.abs(e.endX-t.endX),i=Math.abs(e.endY-t.endY),l=Math.sqrt(n*n+r*r),s=Math.sqrt(o*o+i*i),c=(s-l)/l;a.push(c)})}),a.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),a[0]}function X(e){var t=0,a=0,n=0;return s(e,function(e){var r=e.startX,o=e.startY;t+=r,a+=o,n+=1}),t/=n,a/=n,{pageX:t,pageY:a}}var F={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},I='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},K=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),V=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},$=/^data:.*,/,Q=/([a-z\d])([A-Z])/g,Z=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i,J=/\s+/,ee=/^(width|height|left|top|marginLeft|marginTop)$/,te=/^\s+(.*)\s+$/,ae=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,ne="undefined"!=typeof window?window.navigator:null,re=ne&&ae.test(ne.userAgent),oe=Object.prototype,ie=oe.toString,le=oe.hasOwnProperty,se=(Array.prototype.slice,String.fromCharCode),ce={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e=this,t=e.options,a=e.element,n=e.container,r=e.cropper,o="cropper-hidden",i=void 0;h(r,o),f(a,o),e.containerData=i={width:Math.max(n.offsetWidth,Number(t.minContainerWidth)||200),height:Math.max(n.offsetHeight,Number(t.minContainerHeight)||100)},d(r,{width:i.width,height:i.height}),h(a,o),f(r,o)},initCanvas:function(){var e=this,t=e.options.viewMode,a=e.containerData,n=e.imageData,r=Math.abs(n.rotate)%180===90,o=r?n.naturalHeight:n.naturalWidth,i=r?n.naturalWidth:n.naturalHeight,l=o/i,s=a.width,u=a.height;a.height*l>a.width?3===t?s=a.height*l:u=a.width/l:3===t?u=a.width/l:s=a.height*l;var d={naturalWidth:o,naturalHeight:i,aspectRatio:l,width:s,height:u};d.oldLeft=d.left=(a.width-s)/2,d.oldTop=d.top=(a.height-u)/2,e.canvasData=d,e.limited=1===t||2===t,e.limitCanvas(!0,!0),e.initialImageData=c({},n),e.initialCanvasData=c({},d)},limitCanvas:function(e,t){var a=this,n=a.options,r=n.viewMode,o=a.containerData,i=a.canvasData,l=i.aspectRatio,s=a.cropBoxData,c=a.cropped&&s;if(e){var u=Number(n.minCanvasWidth)||0,d=Number(n.minCanvasHeight)||0;r>1?(u=Math.max(u,o.width),d=Math.max(d,o.height),3===r&&(d*l>u?u=d*l:d=u/l)):r>0&&(u?u=Math.max(u,c?s.width:0):d?d=Math.max(d,c?s.height:0):c&&(u=s.width,d=s.height,d*l>u?u=d*l:d=u/l)),u&&d?d*l>u?d=u/l:u=d*l:u?d=u/l:d&&(u=d*l),i.minWidth=u,i.minHeight=d,i.maxWidth=1/0,i.maxHeight=1/0}if(t)if(r){var p=o.width-i.width,h=o.height-i.height;i.minLeft=Math.min(0,p),i.minTop=Math.min(0,h),i.maxLeft=Math.max(0,p),i.maxTop=Math.max(0,h),c&&a.limited&&(i.minLeft=Math.min(s.left,s.left+(s.width-i.width)),i.minTop=Math.min(s.top,s.top+(s.height-i.height)),i.maxLeft=s.left,i.maxTop=s.top,2===r&&(i.width>=o.width&&(i.minLeft=Math.min(0,p),i.maxLeft=Math.max(0,p)),i.height>=o.height&&(i.minTop=Math.min(0,h),i.maxTop=Math.max(0,h))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=o.width,i.maxTop=o.height},renderCanvas:function(e){var t=this,a=t.canvasData,n=t.imageData,r=n.rotate;if(t.rotated){t.rotated=!1;var o=B({width:n.width,height:n.height,degree:r}),i=o.width/o.height,l=1===n.aspectRatio;if(l||i!==a.aspectRatio){if(a.left-=(o.width-a.width)/2,a.top-=(o.height-a.height)/2,a.width=o.width,a.height=o.height,a.aspectRatio=i,a.naturalWidth=n.naturalWidth,a.naturalHeight=n.naturalHeight,l&&r%90||r%180){var s=B({width:n.naturalWidth,height:n.naturalHeight,degree:r});a.naturalWidth=s.width,a.naturalHeight=s.height}t.limitCanvas(!0,!1)}}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),t.limitCanvas(!1,!0),a.oldLeft=a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.oldTop=a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),d(t.canvas,c({width:a.width,height:a.height},j({translateX:a.left,translateY:a.top}))),t.renderImage(),t.cropped&&t.limited&&t.limitCropBox(!0,!0),e&&t.output()},renderImage:function(e){var t=this,a=t.canvasData,n=t.imageData,r=void 0,o=void 0,i=void 0,l=void 0;n.rotate&&(o=B({width:a.width,height:a.height,degree:n.rotate,aspectRatio:n.aspectRatio},!0),i=o.width,l=o.height,r={width:i,height:l,left:(a.width-i)/2,top:(a.height-l)/2}),c(n,r||{width:a.width,height:a.height,left:0,top:0}),d(t.image,c({width:n.width,height:n.height},j(c({translateX:n.left,translateY:n.top},n)))),e&&t.output()},initCropBox:function(){var e=this,t=e.options,a=t.aspectRatio,n=Number(t.autoCropArea)||.8,r=e.canvasData,o={width:r.width,height:r.height};a&&(r.height*a>r.width?o.height=o.width/a:o.width=o.height*a),e.cropBoxData=o,e.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.oldLeft=o.left=r.left+(r.width-o.width)/2,o.oldTop=o.top=r.top+(r.height-o.height)/2,e.initialCropBoxData=c({},o)},limitCropBox:function(e,t){var a=this,n=a.options,r=n.aspectRatio,o=a.containerData,i=a.canvasData,l=a.cropBoxData,s=a.limited;if(e){var c=Number(n.minCropBoxWidth)||0,u=Number(n.minCropBoxHeight)||0,d=Math.min(o.width,s?i.width:o.width),p=Math.min(o.height,s?i.height:o.height);c=Math.min(c,o.width),u=Math.min(u,o.height),r&&(c&&u?u*r>c?u=c/r:c=u*r:c?u=c/r:u&&(c=u*r),p*r>d?p=d/r:d=p*r),l.minWidth=Math.min(c,d),l.minHeight=Math.min(u,p),l.maxWidth=d,l.maxHeight=p}t&&(s?(l.minLeft=Math.max(0,i.left),l.minTop=Math.max(0,i.top),l.maxLeft=Math.min(o.width,i.left+i.width)-l.width,l.maxTop=Math.min(o.height,i.top+i.height)-l.height):(l.minLeft=0,l.minTop=0,l.maxLeft=o.width-l.width,l.maxTop=o.height-l.height))},renderCropBox:function(){var e=this,t=e.options,a=e.containerData,n=e.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),e.limitCropBox(!1,!0),n.oldLeft=n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),t.movable&&t.cropBoxMovable&&y(e.face,"action",n.width===a.width&&n.height===a.height?"move":"all"),d(e.cropBox,c({width:n.width,height:n.height},j({translateX:n.left,translateY:n.top}))),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this;e.preview(),e.complete&&x(e.element,"crop",e.getData())}},ue="preview",de={initPreview:function(){var e=this,t=e.options.preview,a=O("img"),n=e.crossOrigin,r=n?e.crossOriginUrl:e.url;if(n&&(a.crossOrigin=n),a.src=r,P(e.viewBox,a),e.image2=a,t){var o=t.querySelector?[t]:document.querySelectorAll(t);e.previews=o,s(o,function(e){var t=O("img");y(e,ue,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),n&&(t.crossOrigin=n),t.src=r,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',S(e),P(e,t)})}},resetPreview:function(){s(this.previews,function(e){var t=g(e,ue);d(e,{width:t.width,height:t.height}),e.innerHTML=t.html,b(e,ue)})},preview:function(){var e=this,t=e.imageData,a=e.canvasData,n=e.cropBoxData,r=n.width,o=n.height,i=t.width,l=t.height,u=n.left-a.left-t.left,p=n.top-a.top-t.top;e.cropped&&!e.disabled&&(d(e.image2,c({width:i,height:l},j(c({translateX:-u,translateY:-p},t)))),s(e.previews,function(e){var a=g(e,ue),n=a.width,s=a.height,h=n,f=s,m=1;r&&(m=n/r,f=o*m),o&&f>s&&(m=s/o,h=r*m,f=s),d(e,{width:h,height:f}),d(M(e,"img")[0],c({width:i*m,height:l*m},j(c({translateX:-u*m,translateY:-p*m},t))))}))}},pe="undefined"!=typeof window?window.PointerEvent:null,he=pe?"pointerdown":"touchstart mousedown",fe=pe?"pointermove":"touchmove mousemove",me=pe?" pointerup pointercancel":"touchend touchcancel mouseup",ve="wheel mousewheel DOMMouseScroll",ge="dblclick",ye="resize",be="cropstart",we="cropmove",Ce="cropend",xe="crop",Ee="zoom",Te={bind:function(){var e=this,t=e.options,a=e.element,n=e.cropper;o(t.cropstart)&&C(a,be,t.cropstart),o(t.cropmove)&&C(a,we,t.cropmove),o(t.cropend)&&C(a,Ce,t.cropend),o(t.crop)&&C(a,xe,t.crop),o(t.zoom)&&C(a,Ee,t.zoom),C(n,he,e.onCropStart=u(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&C(n,ve,e.onWheel=u(e.wheel,e)),t.toggleDragModeOnDblclick&&C(n,ge,e.onDblclick=u(e.dblclick,e)),C(document,fe,e.onCropMove=u(e.cropMove,e)),C(document,me,e.onCropEnd=u(e.cropEnd,e)),t.responsive&&C(window,ye,e.onResize=u(e.resize,e))},unbind:function(){var e=this,t=e.options,a=e.element,n=e.cropper;o(t.cropstart)&&w(a,be,t.cropstart),o(t.cropmove)&&w(a,we,t.cropmove),o(t.cropend)&&w(a,Ce,t.cropend),o(t.crop)&&w(a,xe,t.crop),o(t.zoom)&&w(a,Ee,t.zoom),w(n,he,e.onCropStart),t.zoomable&&t.zoomOnWheel&&w(n,ve,e.onWheel),t.toggleDragModeOnDblclick&&w(n,ge,e.onDblclick),w(document,fe,e.onCropMove),w(document,me,e.onCropEnd),t.responsive&&w(window,ye,e.onResize)}},Me=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,ke={resize:function(){var e=this,t=e.options,a=e.container,n=e.containerData,r=Number(t.minContainerWidth)||200,o=Number(t.minContainerHeight)||100;if(!e.disabled&&n.width!==r&&n.height!==o){var i=a.offsetWidth/n.width;1===i&&a.offsetHeight===n.height||!function(){var a=void 0,n=void 0;t.restore&&(a=e.getCanvasData(),n=e.getCropBoxData()),e.render(),t.restore&&(e.setCanvasData(s(a,function(e,t){a[t]=e*i})),e.setCropBoxData(s(n,function(e,t){n[t]=e*i})))}()}},dblclick:function(){var e=this;e.disabled||"none"===e.options.dragMode||e.setDragMode(p(e.dragBox,"cropper-crop")?"move":"crop")},wheel:function(e){var t=this,a=E(e),n=Number(t.options.wheelZoomRatio)||.1,r=1;t.disabled||(a.preventDefault(),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?r=a.deltaY>0?1:-1:a.wheelDelta?r=-a.wheelDelta/120:a.detail&&(r=a.detail>0?1:-1),t.zoom(-r*n,a)))},cropStart:function(e){var t=this;if(!t.disabled){var a=t.options,n=t.pointers,r=E(e),o=void 0;r.changedTouches?s(r.changedTouches,function(e){n[e.identifier]=Y(e)}):n[r.pointerId||0]=Y(r),o=Object.keys(n).length>1&&a.zoomable&&a.zoomOnTouch?"zoom":g(r.target,"action"),Me.test(o)&&x(t.element,"cropstart",{originalEvent:r,action:o})!==!1&&(r.preventDefault(),t.action=o,t.cropping=!1,"crop"===o&&(t.cropping=!0,h(t.dragBox,"cropper-modal")))}},cropMove:function(e){var t=this,a=t.action;if(!t.disabled&&a){var n=t.pointers,r=E(e);r.preventDefault(),x(t.element,"cropmove",{originalEvent:r,action:a})!==!1&&(r.changedTouches?s(r.changedTouches,function(e){c(n[e.identifier],Y(e,!0))}):c(n[r.pointerId||0],Y(r,!0)),t.change(r))}},cropEnd:function(e){var t=this;if(!t.disabled){var a=t.action,n=t.pointers,r=E(e);r.changedTouches?s(r.changedTouches,function(e){delete n[e.identifier]}):delete n[r.pointerId||0],a&&(r.preventDefault(),Object.keys(n).length||(t.action=""),t.cropping&&(t.cropping=!1,
m(t.dragBox,"cropper-modal",t.cropped&&this.options.modal)),x(t.element,"cropend",{originalEvent:r,action:a}))}}},Oe="e",Pe="w",De="s",Se="n",_e="se",Re="sw",Ne="ne",je="nw",Be={change:function(e){var t=this,a=t.options,n=t.containerData,r=t.canvasData,o=t.cropBoxData,i=a.aspectRatio,l=t.action,c=o.width,u=o.height,d=o.left,p=o.top,h=d+c,m=p+u,v=0,g=0,y=n.width,b=n.height,w=!0,C=void 0;!i&&e.shiftKey&&(i=c&&u?c/u:1),t.limited&&(v=o.minLeft,g=o.minTop,y=v+Math.min(n.width,r.width,r.left+r.width),b=g+Math.min(n.height,r.height,r.top+r.height));var x=t.pointers,E=x[Object.keys(x)[0]],M={x:E.endX-E.startX,y:E.endY-E.startY};switch(i&&(M.X=M.y*i,M.Y=M.x/i),l){case"all":d+=M.x,p+=M.y;break;case Oe:if(M.x>=0&&(h>=y||i&&(p<=g||m>=b))){w=!1;break}c+=M.x,i&&(u=c/i,p-=M.Y/2),c<0&&(l=Pe,c=0);break;case Se:if(M.y<=0&&(p<=g||i&&(d<=v||h>=y))){w=!1;break}u-=M.y,p+=M.y,i&&(c=u*i,d+=M.X/2),u<0&&(l=De,u=0);break;case Pe:if(M.x<=0&&(d<=v||i&&(p<=g||m>=b))){w=!1;break}c-=M.x,d+=M.x,i&&(u=c/i,p+=M.Y/2),c<0&&(l=Oe,c=0);break;case De:if(M.y>=0&&(m>=b||i&&(d<=v||h>=y))){w=!1;break}u+=M.y,i&&(c=u*i,d-=M.X/2),u<0&&(l=Se,u=0);break;case Ne:if(i){if(M.y<=0&&(p<=g||h>=y)){w=!1;break}u-=M.y,p+=M.y,c=u*i}else M.x>=0?h<y?c+=M.x:M.y<=0&&p<=g&&(w=!1):c+=M.x,M.y<=0?p>g&&(u-=M.y,p+=M.y):(u-=M.y,p+=M.y);c<0&&u<0?(l=Re,u=0,c=0):c<0?(l=je,c=0):u<0&&(l=_e,u=0);break;case je:if(i){if(M.y<=0&&(p<=g||d<=v)){w=!1;break}u-=M.y,p+=M.y,c=u*i,d+=M.X}else M.x<=0?d>v?(c-=M.x,d+=M.x):M.y<=0&&p<=g&&(w=!1):(c-=M.x,d+=M.x),M.y<=0?p>g&&(u-=M.y,p+=M.y):(u-=M.y,p+=M.y);c<0&&u<0?(l=_e,u=0,c=0):c<0?(l=Ne,c=0):u<0&&(l=Re,u=0);break;case Re:if(i){if(M.x<=0&&(d<=v||m>=b)){w=!1;break}c-=M.x,d+=M.x,u=c/i}else M.x<=0?d>v?(c-=M.x,d+=M.x):M.y>=0&&m>=b&&(w=!1):(c-=M.x,d+=M.x),M.y>=0?m<b&&(u+=M.y):u+=M.y;c<0&&u<0?(l=Ne,u=0,c=0):c<0?(l=_e,c=0):u<0&&(l=je,u=0);break;case _e:if(i){if(M.x>=0&&(h>=y||m>=b)){w=!1;break}c+=M.x,u=c/i}else M.x>=0?h<y?c+=M.x:M.y>=0&&m>=b&&(w=!1):c+=M.x,M.y>=0?m<b&&(u+=M.y):u+=M.y;c<0&&u<0?(l=je,u=0,c=0):c<0?(l=Re,c=0):u<0&&(l=Ne,u=0);break;case"move":t.move(M.x,M.y),w=!1;break;case"zoom":t.zoom(z(x),e),w=!1;break;case"crop":if(!M.x||!M.y){w=!1;break}C=T(t.cropper),d=E.startX-C.left,p=E.startY-C.top,c=o.minWidth,u=o.minHeight,M.x>0?l=M.y>0?_e:Ne:M.x<0&&(d-=c,l=M.y>0?Re:je),M.y<0&&(p-=u),t.cropped||(f(t.cropBox,"cropper-hidden"),t.cropped=!0,t.limited&&t.limitCropBox(!0,!0))}w&&(o.width=c,o.height=u,o.left=d,o.top=p,t.action=l,t.renderCropBox()),s(x,function(e){e.startX=e.endX,e.startY=e.endY})}},Ae={crop:function(){var e=this;return e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&h(e.dragBox,"cropper-modal"),f(e.cropBox,"cropper-hidden")),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.ready&&!e.disabled&&(e.imageData=c({},e.initialImageData),e.canvasData=c({},e.initialCanvasData),e.cropBoxData=c({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(c(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),f(e.dragBox,"cropper-modal"),h(e.cropBox,"cropper-hidden")),e},replace:function(e,t){var a=this;return!a.disabled&&e&&(a.isImg&&(a.element.src=e),t?(a.url=e,a.image.src=e,a.ready&&(a.image2.src=e,s(a.previews,function(t){M(t,"img")[0].src=e}))):(a.isImg&&(a.replaced=!0),a.options.data=null,a.load(e))),a},enable:function(){var e=this;return e.ready&&(e.disabled=!1,f(e.cropper,"cropper-disabled")),e},disable:function(){var e=this;return e.ready&&(e.disabled=!0,h(e.cropper,"cropper-disabled")),e},destroy:function(){var e=this,t=e.element,a=e.image;return e.loaded?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),f(t,"cropper-hidden")):e.isImg?w(t,"load",e.onStart):a&&D(a),b(t,"cropper"),e},move:function(e,t){var n=this,r=n.canvasData;return n.moveTo(a(e)?e:r.left+Number(e),a(t)?t:r.top+Number(t))},moveTo:function(e,n){var r=this,o=r.canvasData,i=!1;return a(n)&&(n=e),e=Number(e),n=Number(n),r.ready&&!r.disabled&&r.options.movable&&(t(e)&&(o.left=e,i=!0),t(n)&&(o.top=n,i=!0),i&&r.renderCanvas(!0)),r},zoom:function(e,t){var a=this,n=a.canvasData;return e=Number(e),e=e<0?1/(1-e):1+e,a.zoomTo(n.width*e/n.naturalWidth,t)},zoomTo:function(e,t){var a=this,n=a.options,r=a.canvasData,o=r.width,i=r.height,l=r.naturalWidth,s=r.naturalHeight;if(e=Number(e),e>=0&&a.ready&&!a.disabled&&n.zoomable){var c=l*e,u=s*e;if(x(a.element,"zoom",{originalEvent:t,oldRatio:o/l,ratio:c/l})===!1)return a;if(t){var d=a.pointers,p=T(a.cropper),h=d&&Object.keys(d).length?X(d):{pageX:t.pageX,pageY:t.pageY};r.left-=(c-o)*((h.pageX-p.left-r.left)/o),r.top-=(u-i)*((h.pageY-p.top-r.top)/i)}else r.left-=(c-o)/2,r.top-=(u-i)/2;r.width=c,r.height=u,a.renderCanvas(!0)}return a},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+Number(e))},rotateTo:function(e){var a=this;return e=Number(e),t(e)&&a.ready&&!a.disabled&&a.options.rotatable&&(a.imageData.rotate=e%360,a.rotated=!0,a.renderCanvas(!0)),a},scale:function(e,n){var r=this,o=r.imageData,i=!1;return a(n)&&(n=e),e=Number(e),n=Number(n),r.ready&&!r.disabled&&r.options.scalable&&(t(e)&&(o.scaleX=e,i=!0),t(n)&&(o.scaleY=n,i=!0),i&&r.renderImage(!0)),r},scaleX:function(e){var a=this,n=a.imageData.scaleY;return a.scale(e,t(n)?n:1)},scaleY:function(e){var a=this,n=a.imageData.scaleX;return a.scale(t(n)?n:1,e)},getData:function(e){var t=this,a=t.options,n=t.imageData,r=t.canvasData,o=t.cropBoxData,i=void 0,l=void 0;return t.ready&&t.cropped?(l={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height},i=n.width/n.naturalWidth,s(l,function(t,a){t/=i,l[a]=e?Math.round(t):t})):l={x:0,y:0,width:0,height:0},a.rotatable&&(l.rotate=n.rotate||0),a.scalable&&(l.scaleX=n.scaleX||1,l.scaleY=n.scaleY||1),l},setData:function(e){var a=this,n=a.options,i=a.imageData,l=a.canvasData,s={},c=void 0,u=void 0,d=void 0;return o(e)&&(e=e.call(a.element)),a.ready&&!a.disabled&&r(e)&&(n.rotatable&&t(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,a.rotated=c=!0),n.scalable&&(t(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,u=!0),t(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,u=!0)),c?a.renderCanvas():u&&a.renderImage(),d=i.width/i.naturalWidth,t(e.x)&&(s.left=e.x*d+l.left),t(e.y)&&(s.top=e.y*d+l.top),t(e.width)&&(s.width=e.width*d),t(e.height)&&(s.height=e.height*d),a.setCropBoxData(s)),a},getContainerData:function(){var e=this;return e.ready?e.containerData:{}},getImageData:function(){var e=this;return e.loaded?e.imageData:{}},getCanvasData:function(){var e=this,t=e.canvasData,a={};return e.ready&&s(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(e){var a=this,n=a.canvasData,i=n.aspectRatio;return o(e)&&(e=e.call(a.element)),a.ready&&!a.disabled&&r(e)&&(t(e.left)&&(n.left=e.left),t(e.top)&&(n.top=e.top),t(e.width)?(n.width=e.width,n.height=e.width/i):t(e.height)&&(n.height=e.height,n.width=e.height*i),a.renderCanvas(!0)),a},getCropBoxData:function(){var e=this,t=e.cropBoxData,a=void 0;return e.ready&&e.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(e){var a=this,n=a.cropBoxData,i=a.options.aspectRatio,l=void 0,s=void 0;return o(e)&&(e=e.call(a.element)),a.ready&&a.cropped&&!a.disabled&&r(e)&&(t(e.left)&&(n.left=e.left),t(e.top)&&(n.top=e.top),t(e.width)&&e.width!==n.width&&(l=!0,n.width=e.width),t(e.height)&&e.height!==n.height&&(s=!0,n.height=e.height),i&&(l?n.height=n.width/i:s&&(n.width=n.height*i)),a.renderCropBox()),a},getCroppedCanvas:function(e){var t=this;if(!t.ready||!window.HTMLCanvasElement)return null;if(r(e)||(e={}),!t.cropped)return A(t.image,t.imageData,e);var a=t.getData(),n=a.width,o=a.height,i=n/o,l=void 0,s=void 0,c=void 0;r(e)&&(l=e.width,s=e.height,l?(s=l/i,c=l/n):s&&(l=s*i,c=s/o));var u=Math.floor(l||n),d=Math.floor(s||o),p=O("canvas"),h=p.getContext("2d");p.width=u,p.height=d,e.fillColor&&(h.fillStyle=e.fillColor,h.fillRect(0,0,u,d));var f=function(){var r=A(t.image,t.imageData,e),i=r.width,l=r.height,s=t.canvasData,u=[r],d=a.x+s.naturalWidth*(Math.abs(a.scaleX||1)-1)/2,p=a.y+s.naturalHeight*(Math.abs(a.scaleY||1)-1)/2,h=void 0,f=void 0,m=void 0,v=void 0,g=void 0,y=void 0;return d<=-n||d>i?d=h=m=g=0:d<=0?(m=-d,d=0,h=g=Math.min(i,n+d)):d<=i&&(m=0,h=g=Math.min(n,i-d)),h<=0||p<=-o||p>l?p=f=v=y=0:p<=0?(v=-p,p=0,f=y=Math.min(l,o+p)):p<=l&&(v=0,f=y=Math.min(o,l-p)),u.push(Math.floor(d),Math.floor(p),Math.floor(h),Math.floor(f)),c&&(m*=c,v*=c,g*=c,y*=c),g>0&&y>0&&u.push(Math.floor(m),Math.floor(v),Math.floor(g),Math.floor(y)),u}();return h.imageSmoothingEnabled=!!e.imageSmoothingEnabled,e.imageSmoothingQuality&&(h.imageSmoothingQuality=e.imageSmoothingQuality),h.drawImage.apply(h,V(f)),p},setAspectRatio:function(e){var t=this,n=t.options;return t.disabled||a(e)||(n.aspectRatio=Math.max(0,e)||NaN,t.ready&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t=this,a=t.options,n=t.dragBox,r=t.face,o=void 0,i=void 0;return t.loaded&&!t.disabled&&(o="crop"===e,i=a.movable&&"move"===e,e=o||i?e:"none",y(n,"action",e),m(n,"cropper-crop",o),m(n,"cropper-move",i),a.cropBoxMovable||(y(r,"action",e),m(r,"cropper-crop",o),m(r,"cropper-move",i))),t}},Le="cropper",He=Le+"-hidden",We="error",qe="load",Ye="ready",ze="crop",Xe=/^data:/,Fe=/^data:image\/jpeg;base64,/,Ie=void 0,Ue=function(){function e(t,a){G(this,e);var n=this;n.element=t,n.options=c({},F,r(a)&&a),n.loaded=!1,n.ready=!1,n.complete=!1,n.rotated=!1,n.cropped=!1,n.disabled=!1,n.replaced=!1,n.limited=!1,n.wheeling=!1,n.isImg=!1,n.originalUrl="",n.canvasData=null,n.cropBoxData=null,n.previews=null,n.pointers={},n.init()}return K(e,[{key:"init",value:function(){var e=this,t=e.element,a=t.tagName.toLowerCase(),n=void 0;if(!g(t,Le)){if(y(t,Le,e),"img"===a){if(e.isImg=!0,e.originalUrl=n=t.getAttribute("src"),!n)return;n=t.src}else"canvas"===a&&window.HTMLCanvasElement&&(n=t.toDataURL());e.load(n)}}},{key:"load",value:function(e){var t=this,a=t.options,n=t.element;if(e){if(t.url=e,t.imageData={},!a.checkOrientation||!window.ArrayBuffer)return void t.clone();if(Xe.test(e))return void(Fe.test(e)?t.read(W(e)):t.clone());var r=new XMLHttpRequest;r.onerror=r.onabort=function(){t.clone()},r.onload=function(){t.read(r.response)},a.checkCrossOrigin&&_(e)&&n.crossOrigin&&(e=R(e)),r.open("get",e),r.responseType="arraybuffer",r.withCredentials="use-credentials"===n.crossOrigin,r.send()}}},{key:"read",value:function(e){var t=this,a=t.options,n=H(e),r=t.imageData,o=0,i=1,l=1;if(n>1)switch(t.url=q(e),n){case 2:i=-1;break;case 3:o=-180;break;case 4:l=-1;break;case 5:o=90,l=-1;break;case 6:o=90;break;case 7:o=90,i=-1;break;case 8:o=-90}a.rotatable&&(r.rotate=o),a.scalable&&(r.scaleX=i,r.scaleY=l),t.clone()}},{key:"clone",value:function(){var e=this,t=e.element,a=e.url,n=void 0,r=void 0,o=void 0,i=void 0;e.options.checkCrossOrigin&&_(a)&&(n=t.crossOrigin,n?r=a:(n="anonymous",r=R(a))),e.crossOrigin=n,e.crossOriginUrl=r;var l=O("img");n&&(l.crossOrigin=n),l.src=r||a,e.image=l,e.onStart=o=u(e.start,e),e.onStop=i=u(e.stop,e),e.isImg?t.complete?e.start():C(t,qe,o):(C(l,qe,o),C(l,We,i),h(l,"cropper-hide"),t.parentNode.insertBefore(l,t.nextSibling))}},{key:"start",value:function(e){var t=this,a=t.isImg?t.element:t.image;e&&(w(a,qe,t.onStart),w(a,We,t.onStop)),N(a,function(e,a){c(t.imageData,{naturalWidth:e,naturalHeight:a,aspectRatio:e/a}),t.loaded=!0,t.build()})}},{key:"stop",value:function(){var e=this,t=e.image;w(t,qe,e.onStart),w(t,We,e.onStop),D(t),e.image=null}},{key:"build",value:function(){var e=this,t=e.options,a=e.element,n=e.image,r=void 0,i=void 0,l=void 0,s=void 0,c=void 0,u=void 0;if(e.loaded){e.ready&&e.unbuild();var d=O("div");d.innerHTML=I,e.container=r=a.parentNode,e.cropper=i=k(d,"cropper-container")[0],e.canvas=l=k(i,"cropper-canvas")[0],e.dragBox=s=k(i,"cropper-drag-box")[0],e.cropBox=c=k(i,"cropper-crop-box")[0],e.viewBox=k(i,"cropper-view-box")[0],e.face=u=k(c,"cropper-face")[0],P(l,n),h(a,He),r.insertBefore(i,a.nextSibling),e.isImg||f(n,"cropper-hide"),e.initPreview(),e.bind(),t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,e.cropped=t.autoCrop,t.autoCrop?t.modal&&h(s,"cropper-modal"):h(c,He),t.guides||h(k(c,"cropper-dashed"),He),t.center||h(k(c,"cropper-center"),He),t.background&&h(i,"cropper-bg"),t.highlight||h(u,"cropper-invisible"),t.cropBoxMovable&&(h(u,"cropper-move"),y(u,"action","all")),t.cropBoxResizable||(h(k(c,"cropper-line"),He),h(k(c,"cropper-point"),He)),e.setDragMode(t.dragMode),e.render(),e.ready=!0,e.setData(t.data),e.completing=setTimeout(function(){o(t.ready)&&C(a,Ye,t.ready,!0),x(a,Ye),x(a,ze,e.getData()),e.complete=!0},0)}}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.complete||clearTimeout(e.completing),e.ready=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,D(e.cropper),e.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=Ie,e}},{key:"setDefaults",value:function(e){c(F,r(e)&&e)}}]),e}();return c(Ue.prototype,ce),c(Ue.prototype,de),c(Ue.prototype,Te),c(Ue.prototype,ke),c(Ue.prototype,Be),c(Ue.prototype,Ae),"undefined"!=typeof window&&(Ie=window.Cropper,window.Cropper=Ue),Ue})},1695:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),d=n(u),p=a(26),h=n(p),f=a(1443),m=n(f),v=["dragMode","aspectRatio","data","crop","viewMode","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRation","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minContainerWidth","minContainerHeight","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","ready","cropstart","cropmove","cropend","zoom"],g=v.slice(4),y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this,t=Object.keys(this.props).filter(function(e){return v.indexOf(e)!==-1}).reduce(function(t,a){return s({},t,r({},a,e.props[a]))},{});this.cropper=new m.default(this.img,t)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.src!==this.props.src&&this.cropper.reset().clear().replace(e.src),e.aspectRatio!==this.props.aspectRatio&&this.setAspectRatio(e.aspectRatio),e.data!==this.props.data&&this.setData(e.data),e.dragMode!==this.props.dragMode&&this.setDragMode(e.dragMode),e.cropBoxData!==this.props.cropBoxData&&this.setCropBoxData(e.cropBoxData),e.canvasData!==this.props.canvasData&&this.setCanvasData(e.canvasData),e.moveTo!==this.props.moveTo&&(e.moveTo.length>1?this.moveTo(e.moveTo[0],e.moveTo[1]):this.moveTo(e.moveTo[0])),e.zoomTo!==this.props.zoomTo&&this.zoomTo(e.zoomTo),e.rotateTo!==this.props.rotateTo&&this.rotateTo(e.rotateTo),e.scaleX!==this.props.scaleX&&this.scaleX(e.scaleX),e.scaleY!==this.props.scaleY&&this.scaleY(e.scaleY),e.enable!==this.props.enable&&(e.enable?this.enable():this.disable()),Object.keys(e).forEach(function(a){if(e[a]!==t.props[a]&&g.indexOf(a)!==-1)throw new Error("prop: "+a+" can't be change after componentDidMount")})}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"setDragMode",value:function(e){return this.cropper.setDragMode(e)}},{key:"setAspectRatio",value:function(e){return this.cropper.setAspectRatio(e)}},{key:"getCroppedCanvas",value:function(e){return this.cropper.getCroppedCanvas(e)}},{key:"setCropBoxData",value:function(e){return this.cropper.setCropBoxData(e)}},{key:"getCropBoxData",value:function(){return this.cropper.getCropBoxData()}},{key:"setCanvasData",value:function(e){return this.cropper.setCanvasData(e)}},{key:"getCanvasData",value:function(){return this.cropper.getCanvasData()}},{key:"getImageData",value:function(){return this.cropper.getImageData()}},{key:"getContainerData",value:function(){return this.cropper.getContainerData()}},{key:"setData",value:function(e){return this.cropper.setData(e)}},{key:"getData",value:function(e){return this.cropper.getData(e)}},{key:"crop",value:function(){return this.cropper.crop()}},{key:"move",value:function(e,t){return this.cropper.move(e,t)}},{key:"moveTo",value:function(e,t){return this.cropper.moveTo(e,t)}},{key:"zoom",value:function(e){return this.cropper.zoom(e)}},{key:"zoomTo",value:function(e){return this.cropper.zoomTo(e)}},{key:"rotate",value:function(e){return this.cropper.rotate(e)}},{key:"rotateTo",value:function(e){return this.cropper.rotateTo(e)}},{key:"enable",value:function(){return this.cropper.enable()}},{key:"disable",value:function(){return this.cropper.disable()}},{key:"reset",value:function(){return this.cropper.reset()}},{key:"clear",value:function(){return this.cropper.clear()}},{key:"replace",value:function(e,t){return this.cropper.replace(e,t)}},{key:"scale",value:function(e,t){return this.cropper.scale(e,t)}},{key:"scaleX",value:function(e){return this.cropper.scaleX(e)}},{key:"scaleY",value:function(e){return this.cropper.scaleY(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.src,n=t.alt,r=t.crossOrigin;return d.default.createElement("div",{src:null,crossOrigin:null,alt:null,style:this.props.style,className:this.props.className},d.default.createElement("img",{crossOrigin:r,ref:function(t){e.img=t},src:a,alt:void 0===n?"picture":n,style:{opacity:0}}))}}]),t}(u.Component);y.propTypes={style:h.default.object,className:h.default.string,crossOrigin:h.default.string,src:h.default.string,alt:h.default.string,aspectRatio:h.default.number,dragMode:h.default.oneOf(["crop","move","none"]),data:h.default.shape({x:h.default.number,y:h.default.number,width:h.default.number,height:h.default.number,rotate:h.default.number,scaleX:h.default.number,scaleY:h.default.number}),scaleX:h.default.number,scaleY:h.default.number,enable:h.default.bool,cropBoxData:h.default.shape({left:h.default.number,top:h.default.number,width:h.default.number,height:h.default.number}),canvasData:h.default.shape({left:h.default.number,top:h.default.number,width:h.default.number,height:h.default.number}),zoomTo:h.default.number,moveTo:h.default.arrayOf(h.default.number),rotateTo:h.default.number,viewMode:h.default.oneOf([0,1,2,3]),preview:h.default.string,responsive:h.default.bool,restore:h.default.bool,checkCrossOrigin:h.default.bool,checkOrientation:h.default.bool,modal:h.default.bool,guides:h.default.bool,center:h.default.bool,highlight:h.default.bool,background:h.default.bool,autoCrop:h.default.bool,autoCropArea:h.default.number,movable:h.default.bool,rotatable:h.default.bool,scalable:h.default.bool,zoomable:h.default.bool,zoomOnTouch:h.default.bool,zoomOnWheel:h.default.bool,wheelZoomRation:h.default.number,cropBoxMovable:h.default.bool,cropBoxResizable:h.default.bool,toggleDragModeOnDblclick:h.default.bool,minContainerWidth:h.default.number,minContainerHeight:h.default.number,minCanvasWidth:h.default.number,minCanvasHeight:h.default.number,minCropBoxWidth:h.default.number,minCropBoxHeight:h.default.number,ready:h.default.func,cropstart:h.default.func,cropmove:h.default.func,cropend:h.default.func,crop:h.default.func,zoom:h.default.func},y.defaultProps={src:null,dragMode:"crop",data:null,scaleX:1,scaleY:1,enable:!0,zoomTo:1,rotateTo:0},t.default=y},1987:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,o=t,i=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=i,n=!0,l=c=void 0}},c=a(1),u=n(c),d=a(8),p=a(2),h=a(3),f=(n(h),a(5)),m=a(4),v=function(e,t){var a={};return e.email?/^(\w-*\.*)+@(\w+[\w|-]*)+(\.\w+[\w|-]*)*(\.\w{2,})+$/.test(e.email)||(a.email="输入格式有误"):a.email="邮箱不能为空",a},g=function(e){function t(e){r(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}o(t,e),l(t,[{key:"handleSubmit",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,o.next=6,regeneratorRuntime.awrap(a({bind_email:t.email}));case 6:r=o.sent,0===r?(this.setState({ecode:0}),n(),f.notify.show("已设置。","success",2e3)):this.setState({ecode:r});case 8:case"end":return o.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields.email,n=e.handleSubmit,r=e.invalid,o=e.submitting;return u.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(p.Modal.Header,{closeButton:!0},u.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"邮箱绑定")),u.default.createElement("form",{onSubmit:n(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(p.Modal.Body,null,u.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:a.touched&&a.error?"error":null},u.default.createElement(p.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"关联邮箱"),u.default.createElement(p.FormControl,i({disabled:o,type:"text"},a,{placeholder:"关联邮箱"})),a.touched&&a.error&&u.default.createElement(p.HelpBlock,{style:{"float":"right"}},a.error))),u.default.createElement(p.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!o&&t[this.state.ecode]),u.default.createElement("img",{src:m,className:o?"loading":"hide"}),u.default.createElement(p.Button,{disabled:o||r,type:"submit"},"确定"),u.default.createElement(p.Button,{bsStyle:"link",disabled:o,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:c.PropTypes.object.isRequired,submitting:c.PropTypes.bool,invalid:c.PropTypes.bool,values:c.PropTypes.object,fields:c.PropTypes.object,handleSubmit:c.PropTypes.func.isRequired,close:c.PropTypes.func.isRequired,update:c.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"bindemail",fields:["email"],validate:v})(t)||t}(c.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},1988:function(e,t,a){try{(function(){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{actions:(0,f.bindActionCreators)(v,e),sessionActions:(0,f.bindActionCreators)(y,e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=function(e,t,a){for(var n=!0;n;){var r=e,o=t,i=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=i,n=!0,l=c=void 0}},d=a(1),p=r(d),h=a(22),f=a(23),m=a(2084),v=n(m),g=a(427),y=n(g),b=a(1990),w=a(1991),C=function(e){function t(e){o(this,a),u(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.pid=""}i(t,e),c(t,[{key:"getUser",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.getUser());case 2:return e.abrupt("return",this.props.mysetting.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"resetPwd",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.resetPwd(e));case 2:return t.abrupt("return",this.props.mysetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"updAccount",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.updAccount(e));case 2:return t.abrupt("return",this.props.mysetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"updNotify",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.updNotify(e));case 2:return t.abrupt("return",this.props.mysetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"updFavorite",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.updFavorite(e));case 2:return t.abrupt("return",this.props.mysetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"setAvatar",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.setAvatar(e));case 2:return t.abrupt("return",this.props.mysetting.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"updAvatar",value:function(e){this.props.sessionActions.updAvatar(e)}},{key:"reLogin",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.sessionActions.destroy());case 2:return 0===this.props.session.ecode&&this.context.router.push({pathname:"/login"}),e.abrupt("return",this.props.session.ecode);case 4:case"end":return e.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.i18n,a=e.session;return p.default.createElement("div",{className:"doc-container"},p.default.createElement("div",null,"admin@action.view"===a.user.email?p.default.createElement(w,s({setAvatar:this.setAvatar.bind(this),updAvatar:this.updAvatar.bind(this),getUser:this.getUser.bind(this),updAccount:this.updAccount.bind(this),resetPwd:this.resetPwd.bind(this),i18n:t},this.props.mysetting)):p.default.createElement(b,s({setAvatar:this.setAvatar.bind(this),getUser:this.getUser.bind(this),updAccount:this.updAccount.bind(this),reLogin:this.reLogin.bind(this),resetPwd:this.resetPwd.bind(this),updNotify:this.updNotify.bind(this),updFavorite:this.updFavorite.bind(this),updAvatar:this.updAvatar.bind(this),i18n:t},this.props.mysetting))))}}],[{key:"propTypes",value:{actions:d.PropTypes.object.isRequired,sessionActions:d.PropTypes.object.isRequired,i18n:d.PropTypes.object.isRequired,session:d.PropTypes.object.isRequired,mysetting:d.PropTypes.object.isRequired},enumerable:!0},{key:"contextTypes",value:{router:d.PropTypes.object.isRequired},enumerable:!0}]);var a=t;return t=(0,h.connect)(function(e){var t=e.i18n,a=e.session,n=e.mysetting;return{i18n:t,session:a,mysetting:n}},l)(t)||t}(d.Component);t.default=C,e.exports=t.default}).call(this)}finally{}},1989:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,o=t,i=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=i,n=!0,l=c=void 0}},c=a(1),u=n(c),d=a(8),p=a(2),h=a(7),f=(n(h),a(3)),m=(n(f),a(5)),v=a(4),g=function(e,t){var a={};return e.first_name||(a.first_name="必填"),a},y=function(e){function t(e){r(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}o(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;t(a)}},{key:"handleSubmit",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,
t=e.values,a=e.update,n=e.close,o.next=6,regeneratorRuntime.awrap(a(t));case 6:r=o.sent,0===r?(this.setState({ecode:0}),n(),m.notify.show("更新完成。","success",2e3)):this.setState({ecode:r});case 8:case"end":return o.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.first_name,r=a.department,o=a.position,l=e.handleSubmit,s=e.invalid,c=e.dirty,d=e.submitting;e.data;return u.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(p.Modal.Header,{closeButton:!0},u.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"编辑个人资料")),u.default.createElement("form",{onSubmit:l(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},u.default.createElement(p.Modal.Body,null,u.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:n.touched&&n.error?"error":null},u.default.createElement(p.ControlLabel,null,u.default.createElement("span",{className:"txt-impt"},"*"),"名称"),u.default.createElement(p.FormControl,i({disabled:d,type:"text"},n,{placeholder:"姓名"})),n.touched&&n.error&&u.default.createElement(p.HelpBlock,{style:{"float":"right"}},n.error)),u.default.createElement(p.FormGroup,{controlId:"formControlsText"},u.default.createElement(p.ControlLabel,null,"部所"),u.default.createElement(p.FormControl,i({disabled:d,type:"text"},r,{placeholder:"所属部所"}))),u.default.createElement(p.FormGroup,{controlId:"formControlsText"},u.default.createElement(p.ControlLabel,null,"职位"),u.default.createElement(p.FormControl,i({disabled:d,type:"text"},o,{placeholder:"职位"})))),u.default.createElement(p.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!d&&t[this.state.ecode]),u.default.createElement("img",{src:v,className:d?"loading":"hide"}),u.default.createElement(p.Button,{disabled:!c||d||s,type:"submit"},"确定"),u.default.createElement(p.Button,{bsStyle:"link",disabled:d,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:c.PropTypes.object.isRequired,submitting:c.PropTypes.bool,invalid:c.PropTypes.bool,dirty:c.PropTypes.bool,values:c.PropTypes.object,fields:c.PropTypes.object,handleSubmit:c.PropTypes.func.isRequired,close:c.PropTypes.func.isRequired,data:c.PropTypes.object.isRequired,initializeForm:c.PropTypes.func.isRequired,update:c.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"mysetting",fields:["first_name","department","position"],validate:g})(t)||t}(c.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},1990:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,o=t,i=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=i,n=!0,l=c=void 0}},s=a(1),c=n(s),u=a(31),d=a(2),p=a(41),h=a(5),f=a(3),m=n(f),v=a(19),g=a(94),y=(a(4),a(1069)),b=a(1989),w=a(1070),C=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={tabKey:"account",editModalShow:!1,avatarEditModalShow:!1,resetPwdModalShow:!1,accounts:{},favorites:{},notifications:{}},this.avatarEditModalClose=this.avatarEditModalClose.bind(this),this.editModalClose=this.editModalClose.bind(this),this.resetPwdModalClose=this.resetPwdModalClose.bind(this)}return o(t,e),i(t,[{key:"avatarEditModalClose",value:function(){this.setState({avatarEditModalShow:!1})}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"resetPwdModalClose",value:function(){this.setState({resetPwdModalShow:!1})}},{key:"handleTabSelect",value:function(e){this.setState({tabKey:e})}},{key:"notifyChange",value:function(e){var t,a,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.updNotify,r.next=3,regeneratorRuntime.awrap(t(e));case 3:return a=r.sent,0===a?h.notify.show("设置完成。","success",2e3):(n=this.props.notifications,this.setState({notifications:n}),h.notify.show("设置失败。","error",2e3)),r.abrupt("return",a);case 6:case"end":return r.stop()}},null,this)}},{key:"mailNotifyChange",value:function(e){this.state.notifications.mail_notify=e.length>0&&!0,this.setState({notifications:this.state.notifications}),this.notifyChange({mail_notify:e.length>0})}},{key:"mobileNotifyChange",value:function(e){this.state.notifications.mobile_notify=e.length>0&&!0,this.setState({notifications:this.state.notifications}),this.notifyChange({mobile_notify:e.length>0})}},{key:"dailyNotifyChange",value:function(e){this.state.notifications.daily_notify=e.length>0&&!0,this.setState({notifications:this.state.notifications}),this.notifyChange({daily_notify:e.length>0})}},{key:"weeklyNotifyChange",value:function(e){this.state.notifications.weekly_notify=e.length>0&&!0,this.setState({notifications:this.state.notifications}),this.notifyChange({weekly_notify:e.length>0})}},{key:"languageChange",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return m.default.extend(this.state.favorites,{language:e}),this.setState({favorites:this.state.favorites}),a.next=4,regeneratorRuntime.awrap(this.favoriteChange({language:e}));case 4:t=a.sent;case 6:case"end":return a.stop()}},null,this)}},{key:"favoriteChange",value:function(e){var t,a,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.updFavorite,r.next=3,regeneratorRuntime.awrap(t(e));case 3:return a=r.sent,0===a||(n=this.props.favorites),r.abrupt("return",a);case 6:case"end":return r.stop()}},null,this)}},{key:"componentWillMount",value:function(){var e,t,a,n,r,o,i,l;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.props.getUser,s.next=3,regeneratorRuntime.awrap(e());case 3:t=this.props,a=t.accounts,n=void 0===a?{}:a,r=t.notifications,o=void 0===r?{}:r,i=t.favorites,l=void 0===i?{}:i,this.setState({accounts:n,notifications:o,favorites:l});case 11:case"end":return s.stop()}},null,this)}},{key:"render",value:function(){var e=this,t={marginLeft:"20px",marginTop:"10px",marginBottom:"10px"},a={color:"#54d09f",fontSize:"12px"},n={color:"#da4f4a",fontSize:"12px"},r=this.props,o=r.i18n,i=r.accounts,l=r.setAvatar,s=r.updAvatar,f=r.avatarLoading,m=(r.accountLoading,r.notifyLoading),C=(r.favoriteLoading,r.updAccount),x=r.reLogin,E=r.resetPwd,T=this.state,M=T.notifications,k=(T.favorites,[]);k.push({id:"avatar",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"头像"),c.default.createElement("span",{className:"table-td-issue-desc"},"选择一张个人正面照片作为头像，让其他成员更容易认识你。")),contents:c.default.createElement("div",{style:t},c.default.createElement("img",{src:i.avatar?(0,v.urlWrapper)("/getavatar?fid="+i.avatar):g,className:"big-avatar"}),c.default.createElement(d.Button,{style:{marginLeft:"15px"},onClick:function(){e.setState({avatarEditModalShow:!0})}},"设置头像"))}),k.push({id:"basic",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"个人资料")),contents:c.default.createElement("div",{style:t},c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2}},c.default.createElement("li",null,"姓名：",i.first_name||"-"),c.default.createElement("li",null,"部门：",i.department||"-"),c.default.createElement("li",null,"职位：",i.position||"-")),c.default.createElement(d.Button,{style:{marginLeft:"15px"},onClick:function(){e.setState({editModalShow:!0})}},"编辑资料"))}),k.push({id:"email",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"邮箱地址"),c.default.createElement("span",{className:"table-td-issue-desc"},"该账号绑定的邮箱地址不能改变。")),contents:c.default.createElement("div",{style:t},"当前邮箱地址为：",i.email||"-")}),k.push({id:"password",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"登录密码"),c.default.createElement("span",{className:"table-td-issue-desc"},"修改密码时需要输入当前密码；建议您定期更换密码，确保帐号安全。")),contents:c.default.createElement("div",{style:t},c.default.createElement(d.Button,{style:{marginLeft:"15px"},onClick:function(){e.setState({resetPwdModalShow:!0})}},"修改密码"))}),k.push({id:"mobile",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"绑定手机号"),c.default.createElement("span",{className:"table-td-issue-desc"},"修改手机时 ActionView 会发送短信到新的手机号，请按照短信中的验证码修改你的手机号码。")),contents:c.default.createElement("div",{style:t},c.default.createElement("div",null,"当前手机号为：",i.mobile||"未设置"),c.default.createElement("div",{style:{marginTop:"10px"}},c.default.createElement(d.Button,{style:{marginLeft:"15px"},onClick:function(){h.notify.show("暂不支持此功能。","warning",2e3)}},i.mobile&&"修改","绑定手机号")))});var O=[];O.push({id:"language",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"语言设置"),c.default.createElement("span",{className:"table-td-issue-desc"},"请选择您喜欢的语言(暂不支持此功能)")),contents:c.default.createElement("div",{style:t},c.default.createElement("div",{style:{margin:"3px"}},"中文"))});var P=[];P.push({id:"mail_notify",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"邮件通知"),c.default.createElement("span",{className:"table-td-issue-desc"},"当问题有重要操作时，会根据相应的通知方案配置，发送提醒邮件给你。")),contents:c.default.createElement("div",{style:t},c.default.createElement(p.CheckboxGroup,{name:"mail_notify",value:M.mail_notify?["mail_notify"]:[],onChange:this.mailNotifyChange.bind(this)},c.default.createElement(p.Checkbox,{disabled:m,value:"mail_notify"}),c.default.createElement("span",null," 开启邮件通知"),c.default.createElement("br",null),M.mail_notify?c.default.createElement("span",{style:a},"已开启"):c.default.createElement("span",{style:n},"已关闭")))}),P.push({id:"mobile_notify",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"移动端通知"),c.default.createElement("span",{className:"table-td-issue-desc"},"当问题有重要操作时，会根据相应的通知方案配置，自动将消息推送到 ActionView 移动客户端")),contents:c.default.createElement("div",{style:t},c.default.createElement(p.CheckboxGroup,{name:"mobile_notify",value:M.mobile_notify?["mobile_notify"]:[],onChange:this.mobileNotifyChange.bind(this)},c.default.createElement(p.Checkbox,{disabled:m,value:"mobile_notify"}),c.default.createElement("span",null," 开启移动端通知"),c.default.createElement("br",null),M.mobile_notify?c.default.createElement("span",{style:a},"已开启"):c.default.createElement("span",{style:n},"已关闭")))}),P.push({id:"daily_notify",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"每日提醒"),c.default.createElement("span",{className:"table-td-issue-desc"},"每天向你发送一封包含当日工作内容的邮件。")),contents:c.default.createElement("div",{style:t},c.default.createElement(p.CheckboxGroup,{name:"daily_notify",value:M.daily_notify?["daily_notify"]:[],onChange:this.dailyNotifyChange.bind(this)},c.default.createElement(p.Checkbox,{disabled:m,value:"daily_notify"}),c.default.createElement("span",null," 接收每日邮件提醒"),c.default.createElement("br",null),M.daily_notify?c.default.createElement("span",{style:a},"已开启"):c.default.createElement("span",{style:n},"已关闭")))}),P.push({id:"weekly_notify",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"每周提醒"),c.default.createElement("span",{className:"table-td-issue-desc"},"每周向你发送一封本周工作内容的邮件。")),contents:c.default.createElement("div",{style:t},c.default.createElement(p.CheckboxGroup,{name:"weekly_notify",value:M.weekly_notify?["weekly_notify"]:[],onChange:this.weeklyNotifyChange.bind(this)},c.default.createElement(p.Checkbox,{disabled:m,value:"weekly_notify"}),c.default.createElement("span",null," 接收每周邮件提醒"),c.default.createElement("br",null),M.weekly_notify?c.default.createElement("span",{style:a},"已开启"):c.default.createElement("span",{style:n},"已关闭")))});var D=[],S=[];return"account"==this.state.tabKey?S=k:"favorite"==this.state.tabKey?S=O:"notification"==this.state.tabKey?S=P:"record"==this.state.tabKey&&(S=D),c.default.createElement("div",null,c.default.createElement(d.Nav,{bsStyle:"pills",style:{marginTop:"10px","float":"left",lineHeight:"1.0"},activeKey:this.state.tabKey,onSelect:this.handleTabSelect.bind(this)},c.default.createElement(d.NavItem,{eventKey:"account",href:"#"},"账号资料"),c.default.createElement(d.NavItem,{eventKey:"favorite",href:"#"},"个人偏好"),c.default.createElement(d.NavItem,{eventKey:"notification",href:"#"},"消息提醒")),c.default.createElement(u.BootstrapTable,{data:S,bordered:!1,hover:!0,trClassName:"tr-top"},c.default.createElement(u.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),c.default.createElement(u.TableHeaderColumn,{width:"260",dataField:"title"}),c.default.createElement(u.TableHeaderColumn,{width:"200",dataField:"contents"}),c.default.createElement(u.TableHeaderColumn,{dataField:"blank"})),this.state.avatarEditModalShow&&c.default.createElement(y,{show:!0,close:this.avatarEditModalClose,loading:f,setAvatar:l,updAvatar:s,data:i,i18n:o}),this.state.editModalShow&&c.default.createElement(b,{show:!0,close:this.editModalClose,update:C,data:i,i18n:o}),this.state.resetPwdModalShow&&c.default.createElement(w,{show:!0,close:this.resetPwdModalClose,reLogin:x,resetPwd:E,i18n:o}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,getUser:s.PropTypes.func.isRequired,setAvatar:s.PropTypes.func.isRequired,updAvatar:s.PropTypes.func.isRequired,avatarLoading:s.PropTypes.bool.isRequired,reLogin:s.PropTypes.func.isRequired,resetPwd:s.PropTypes.func.isRequired,updAccount:s.PropTypes.func.isRequired,updNotify:s.PropTypes.func.isRequired,updFavorite:s.PropTypes.func.isRequired,accountLoading:s.PropTypes.bool.isRequired,accounts:s.PropTypes.object.isRequired,notifyLoading:s.PropTypes.bool.isRequired,notifications:s.PropTypes.object.isRequired,favoriteLoading:s.PropTypes.bool.isRequired,favorites:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=C,e.exports=t.default}).call(this)}finally{}},1991:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,o=t,i=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(i)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=i,n=!0,l=c=void 0}},s=a(1),c=n(s),u=a(31),d=a(2),p=(a(5),a(3)),h=(n(p),a(19)),f=a(94),m=(a(4),a(1069)),v=a(1070),g=a(1987),y=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={avatarEditModalShow:!1,resetPwdModalShow:!1,bindEmailModalShow:!1},this.avatarEditModalClose=this.avatarEditModalClose.bind(this),this.resetPwdModalClose=this.resetPwdModalClose.bind(this),this.bindEmailModalClose=this.bindEmailModalClose.bind(this)}return o(t,e),i(t,[{key:"avatarEditModalClose",value:function(){this.setState({avatarEditModalShow:!1})}},{key:"resetPwdModalClose",value:function(){this.setState({resetPwdModalShow:!1})}},{key:"bindEmailModalClose",value:function(){this.setState({bindEmailModalShow:!1})}},{key:"componentWillMount",value:function(){var e=this.props.getUser;e()}},{key:"render",value:function(){var e=this,t={marginLeft:"20px",marginTop:"10px",marginBottom:"10px"},a=this.props,n=a.i18n,r=a.accounts,o=a.updAccount,i=a.setAvatar,l=a.updAvatar,s=a.avatarLoading,p=a.resetPwd,y=[];return y.push({id:"avatar",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"头像")),contents:c.default.createElement("div",{style:t},c.default.createElement("img",{src:r.avatar?(0,h.urlWrapper)("/getavatar?fid="+r.avatar):f,className:"big-avatar"}),c.default.createElement(d.Button,{style:{marginLeft:"15px"},onClick:function(){e.setState({avatarEditModalShow:!0})}},"设置头像"))}),y.push({id:"basic",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"个人资料")),contents:c.default.createElement("div",{style:t},c.default.createElement("ul",{className:"list-unstyled clearfix",style:{lineHeight:2}},c.default.createElement("li",null,r.first_name||"-")))}),y.push({id:"password",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"登录密码"),c.default.createElement("span",{className:"table-td-issue-desc"},"修改密码时需要输入当前密码；建议您定期更换密码，确保帐号安全。")),contents:c.default.createElement("div",{style:t},c.default.createElement(d.Button,{style:{marginLeft:"15px"},onClick:function(){e.setState({resetPwdModalShow:!0})}},"修改密码"))}),y.push({id:"bindemail",title:c.default.createElement("div",null,c.default.createElement("span",{className:"table-td-title"},"关联邮箱"),c.default.createElement("span",{className:"table-td-issue-desc"},"密码找回时重置链接将会发送至该邮箱。")),contents:c.default.createElement("div",{style:t},r.bind_email?c.default.createElement("div",null,"当前绑定邮箱为：",r.bind_email):c.default.createElement("div",{style:{color:"red"}},"强烈建议配置该邮箱, 方便密码找回时使用。"),c.default.createElement(d.Button,{style:{marginLeft:"15px",marginTop:"10px"},onClick:function(){e.setState({bindEmailModalShow:!0})}},"绑定邮箱"))}),c.default.createElement("div",null,c.default.createElement(d.Nav,{bsStyle:"pills",style:{marginTop:"10px","float":"left",lineHeight:"1.0"},activeKey:"account"},c.default.createElement(d.NavItem,{eventKey:"account",href:"#"},"账号资料")),c.default.createElement(u.BootstrapTable,{data:y,bordered:!1,hover:!0,trClassName:"tr-top"},c.default.createElement(u.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0},"ID"),c.default.createElement(u.TableHeaderColumn,{width:"260",dataField:"title"}),c.default.createElement(u.TableHeaderColumn,{width:"200",dataField:"contents"}),c.default.createElement(u.TableHeaderColumn,{dataField:"blank"})),this.state.avatarEditModalShow&&c.default.createElement(m,{show:!0,close:this.avatarEditModalClose,loading:s,setAvatar:i,updAvatar:l,data:r,i18n:n}),this.state.resetPwdModalShow&&c.default.createElement(v,{show:!0,close:this.resetPwdModalClose,resetPwd:p,i18n:n}),this.state.bindEmailModalShow&&c.default.createElement(g,{show:!0,close:this.bindEmailModalClose,update:o,i18n:n}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,setAvatar:s.PropTypes.func.isRequired,updAvatar:s.PropTypes.func.isRequired,updAccount:s.PropTypes.func.isRequired,avatarLoading:s.PropTypes.bool.isRequired,accounts:s.PropTypes.object.isRequired,getUser:s.PropTypes.func.isRequired,resetPwd:s.PropTypes.func.isRequired},enumerable:!0}]),t}(s.Component);t.default=y,e.exports=t.default}).call(this)}finally{}},2084:function(e,t,a){try{(function(){"use strict";function e(){return(0,s.asyncFuncCreator)({constant:"MYSETTING_USER_SHOW",promise:function(e){return e.request({url:"/mysetting"})}})}function n(e){return(0,s.asyncFuncCreator)({constant:"MYSETTING_ACCOUNT_UPDATE",promise:function(t){return t.request({url:"/mysetting/account",method:"post",data:e})}})}function r(e){return(0,s.asyncFuncCreator)({constant:"MYSETTING_PWD_RESET",promise:function(t){return t.request({url:"/mysetting/resetpwd",method:"post",data:e})}})}function o(e){return(0,s.asyncFuncCreator)({constant:"MYSETTING_NOTIFY_UPDATE",promise:function(t){return t.request({url:"/mysetting/notify",method:"post",data:e})}})}function i(e){return(0,s.asyncFuncCreator)({constant:"MYSETTING_FAVORITE_UPDATE",promise:function(t){return t.request({url:"/mysetting/favorite",method:"post",data:e})}})}function l(e){return(0,s.asyncFuncCreator)({constant:"MYSETTING_SET_AVATAR",promise:function(t){return t.request({url:"/mysetting/avatar",method:"post",data:e})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.getUser=e,t.updAccount=n,t.resetPwd=r,t.updNotify=o,t.updFavorite=i,t.setAvatar=l;var s=a(27)}).call(this)}finally{}}});
//# sourceMappingURL=mysetting-78d786ab55e573352ea9.js.map