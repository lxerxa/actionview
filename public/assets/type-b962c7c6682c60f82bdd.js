webpackJsonp([21],{19:function(e,t,a){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=[{value:"Integer",label:"整数字段"},{value:"Number",label:"数值字段"},{value:"Text",label:"文本框单行"},{value:"TextArea",label:"文本框多行"},{value:"RichTextEditor",label:"富文本"},{value:"Select",label:"选择列表(单行)"},{value:"MultiSelect",label:"选择列表(多行)"},{value:"CheckboxGroup",label:"复选按钮"},{value:"RadioGroup",label:"单选按钮"},{value:"DatePicker",label:"日期选择控件"},{value:"DateTimePicker",label:"日期时间选择控件"},{value:"TimeTracking",label:"时间跟踪"},{value:"File",label:"文件"},{value:"SingleVersion",label:"单一版本选择"},{value:"MultiVersion",label:"多版本选择"},{value:"SingleUser",label:"单一用户选择"},{value:"MultiUser",label:"多用户选择"},{value:"Url",label:"URL"}];t.FieldTypes=e;var a=[{id:"new",name:"新建"},{id:"inprogress",name:"进行中"},{id:"completed",name:"完成"}];t.StateCategories=a;var n={project:[{id:"view_project",name:"查看项目"},{id:"manage_project",name:"管理项目"}],issue:[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"edit_self_issue",name:"编辑自己创建的问题"},{id:"delete_issue",name:"删除问题"},{id:"delete_self_issue",name:"删除自己创建的问题"},{id:"assign_issue",name:"分配问题"},{id:"assigned_issue",name:"被分配问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reset_issue",name:"重置问题"},{id:"link_issue",name:"链接问题"},{id:"move_issue",name:"移动问题"},{id:"exec_workflow",name:"执行流程"}],comments:[{id:"add_comments",name:"添加评论"},{id:"edit_comments",name:"编辑评论"},{id:"edit_self_comments",name:"编辑自己的评论"},{id:"delete_comments",name:"删除评论"},{id:"delete_self_comments",name:"删除自己的评论"}],worklogs:[{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"},{id:"edit_self_worklog",name:"编辑自己的工作日志"},{id:"delete_worklog",name:"删除工作日志"},{id:"delete_self_worklog",name:"删除自己的工作日志"}],files:[{id:"upload_file",name:"上传附件"},{id:"download_file",name:"下载附件"},{id:"remove_file",name:"删除附件"},{id:"remove_self_file",name:"删除自己上传附件"}]};t.Permissions=n;var r=[{id:"create_issue",name:"创建问题"},{id:"edit_issue",name:"编辑问题"},{id:"del_issue",name:"删除问题"},{id:"resolve_issue",name:"解决问题"},{id:"close_issue",name:"关闭问题"},{id:"reopen_issue",name:"重新打开问题"},{id:"create_version",name:"创建版本"},{id:"edit_version",name:"编辑版本"},{id:"release_version",name:"发布版本"},{id:"merge_version",name:"合并版本"},{id:"del_version",name:"删除版本"},{id:"add_worklog",name:"添加工作日志"},{id:"edit_worklog",name:"编辑工作日志"}];t.webhookEvents=r;var o={CARD:"card",KANBAN_COLUMN:"kanban_column",KANBAN_FILTER:"kanban_filter"};t.CardTypes=o;var l=["#CCCCCC","#B3B3B3","#999999","#A4DD00","#68BC00","#006600","#73D8FF","#009CE0","#0062B1","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500"];t.PriorityRGBs=l;var i=["#CCCCCC","#B3B3B3","#999999","#808080","#666666","#FDA1FF","#FA28FF","#AB149E","#AEA1FF","#7B64FF","#653294","#73D8FF","#009CE0","#0062B1","#68CCCA","#16A5A5","#0C797D","#A4DD00","#68BC00","#006600","#DBDF00","#B0BC00","#808900","#FCDC00","#FCC400","#FB9E00","#FE9200","#E27300","#C45100","#F44E3B","#D33115","#9F0500","#4D4D4D","#333333","#000000"];t.LabelRGBs=i;var s=600;t.DetailMinWidth=s;var u=1e3;t.DetailMaxWdith=u}).call(this)}finally{}},48:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(12),d=a(34),f=a(19),p={beginDrag:function(e){return{id:e.id,index:e.index}}},m={hover:function(e,t,a){var n=t.getItem().index,r=e.index;if(n!==r){var o=(0,c.findDOMNode)(a).getBoundingClientRect(),l=(o.bottom-o.top)/2,i=t.getClientOffset(),s=i.y-o.top;n<r&&s<l||n>r&&s>l||(e.moveCard(n,r),t.getItem().index=r)}}},h=function(e){function t(){r(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).apply(this,arguments)}o(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.isDragging,n=e.connectDragSource,r=e.connectDropTarget,o=e.deleteCard,l=a?0:1,i={"float":"right",cursor:"pointer"};return n(r(u.default.createElement("div",{style:{opacity:l},className:"dragcard"},t,!!o&&u.default.createElement("span",{style:i,onClick:o,title:"删除",className:"rm-icon"},u.default.createElement("i",{className:"fa fa-remove"})))))}}],[{key:"propTypes",value:{connectDragSource:s.PropTypes.func.isRequired,connectDropTarget:s.PropTypes.func.isRequired,index:s.PropTypes.number.isRequired,isDragging:s.PropTypes.bool.isRequired,id:s.PropTypes.any.isRequired,text:s.PropTypes.string.isRequired,deleteCard:s.PropTypes.func,moveCard:s.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.DragSource)(f.CardTypes.CARD,p,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(t)||t,t=(0,d.DropTarget)(f.CardTypes.CARD,m,function(e){return{connectDropTarget:e.dropTarget()}})(t)||t}(s.Component);t.default=h,e.exports=t.default}).call(this)}finally{}},115:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(2),d=a(54),f=n(d),p=a(34),m=a(85),h=n(m),y=a(3),b=n(y),v=a(48),w=n(v),g=a(5),E=a(4),S={width:"100%"},T=function(e){function t(e){r(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.moveCard=this.moveCard.bind(this),this.state={cards:[],ecode:0};for(var t=this.props.cards.length,n=0;n<t;n++)this.state.cards.push({id:this.props.cards[n].id,text:this.props.cards[n].name});this.state.strCards=JSON.stringify(this.state.cards)}o(t,e),l(t,[{key:"moveCard",value:function(e,t){var a=this.state.cards,n=a[e];this.setState((0,f.default)(this.state,{cards:{$splice:[[e,1],[t,0,n]]}}))}},{key:"save",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.close,a=e.setSort,n={sequence:b.default.map(this.state.cards,b.default.iteratee("id"))},o.next=6,regeneratorRuntime.awrap(a(n));case 6:r=o.sent,0===r?(this.setState({ecode:0}),t(),g.notify.show("保存完成。","success",2e3)):this.setState({ecode:r});case 8:case"end":return o.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props,t=e.close,a=e.sortLoading;a||t()}},{key:"render",value:function(){var e=this,t=this.state,a=t.cards,n=t.strCards,r=this.props,o=r.model,l=r.i18n.errMsg,i=r.sortLoading;return u.default.createElement(c.Modal,{show:!0,onHide:this.cancel.bind(this),backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"编辑"+o+"顺序")),u.default.createElement(c.Modal.Body,{style:{maxHeight:"420px",overflow:"auto"}},u.default.createElement("div",{style:{marginBottom:"8px"}},"通过上下拖拽改变显示顺序。"),u.default.createElement("div",{style:S},a.map(function(t,a){return u.default.createElement(w.default,{key:t.id,index:a,id:t.id,text:t.text,moveCard:e.moveCard})}))),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&l[this.state.ecode]),u.default.createElement("img",{src:E,className:i?"loading":"hide"}),u.default.createElement(c.Button,{disabled:i||n==JSON.stringify(a),onClick:this.save.bind(this)},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:i,onClick:this.cancel.bind(this)},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,model:s.PropTypes.string.isRequired,cards:s.PropTypes.array,sortLoading:s.PropTypes.bool,setSort:s.PropTypes.func,close:s.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,p.DragDropContext)(h.default)(t)||t}(s.Component);t.default=T,e.exports=t.default}).call(this)}finally{}},2010:function(e,t,a){try{(function(){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{actions:(0,m.bindActionCreators)(y,e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},d=a(1),f=r(d),p=a(21),m=a(22),h=a(2091),y=n(h),b=a(2014),v=a(2015),w=function(e){function t(e){o(this,a),c(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.pid=""}l(t,e),u(t,[{key:"index",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.index(this.pid));case 2:return e.abrupt("return",this.props.type.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"create",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.create(this.pid,e));case 2:return t.abrupt("return",this.props.type.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"update",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.update(this.pid,e));case 2:return t.abrupt("return",this.props.type.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"del",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.actions,a.next=3,regeneratorRuntime.awrap(t.del(this.pid,e));case 3:return a.abrupt("return",this.props.type.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"setSort",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.setSort(this.pid,e));case 2:return t.abrupt("return",this.props.type.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"setDefault",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.props.actions.setDefault(this.pid,e));case 2:return t.abrupt("return",this.props.type.ecode);case 3:case"end":return t.stop()}},null,this)}},{key:"componentWillMount",value:function(){var e=this.props.location.pathname,t=void 0===e?"":e;if(/^\/admin\/scheme/.test(t))this.pid="$_sys_$";else{var a=this.props.params.key;this.pid=a}}},{key:"render",value:function(){var e=this.props.location.pathname,t=void 0===e?"":e,a=/^\/admin\/scheme/.test(t);return f.default.createElement("div",null,f.default.createElement(b,s({isSysConfig:a,setSort:this.setSort.bind(this),setDefault:this.setDefault.bind(this),create:this.create.bind(this),i18n:this.props.i18n},this.props.type)),f.default.createElement(v,s({isSysConfig:a,index:this.index.bind(this),select:this.props.actions.select,update:this.update.bind(this),del:this.del.bind(this),delNotify:this.props.actions.delNotify,i18n:this.props.i18n},this.props.type)))}}],[{key:"propTypes",value:{actions:d.PropTypes.object.isRequired,location:d.PropTypes.object.isRequired,params:d.PropTypes.object.isRequired,i18n:d.PropTypes.object.isRequired,type:d.PropTypes.object.isRequired},enumerable:!0}]);var a=t;return t=(0,p.connect)(function(e){var t=e.i18n,a=e.type;return{i18n:t,type:a}},i)(t)||t}(d.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},2011:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},u=a(1),c=n(u),d=a(8),f=a(2),p=a(7),m=n(p),h=a(3),y=n(h),b=a(5),v=a(4),w=function(e,t){var a={};if(e.name?y.default.findIndex(t.collection||[],{name:e.name})!==-1&&(a.name="该名称已存在"):a.name="必填",e.abb){var n=new RegExp(/^[a-zA-Z0-9]/);n.test(e.abb)?y.default.findIndex(t.collection||[],{abb:e.abb})!==-1&&(a.abb="该缩码已存在"):a.abb="格式有误"}else a.abb="必填";return e.screen_id||(a.screen_id="Required"),e.workflow_id||(a.workflow_id="Required"),a},g=function(e){function t(e){r(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}o(t,e),i(t,[{key:"handleSubmit",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.values,a=e.create,n=e.close,o.next=6,regeneratorRuntime.awrap(a(t));case 6:r=o.sent,0===r?(this.setState({ecode:0}),n(),b.notify.show("新建完成。","success",2e3)):this.setState({ecode:r});case 8:case"end":return o.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.name,r=a.abb,o=a.screen_id,i=a.workflow_id,s=a.type,u=a.description,d=e.options,p=void 0===d?{}:d,h=e.handleSubmit,b=e.invalid,w=e.submitting,g=p.screens,E=void 0===g?[]:g,S=p.workflows,T=void 0===S?[]:S;r.value&&(r.value=r.value.toUpperCase(),r.value=r.value.substring(0,1));var k=y.default.map(E,function(e){return{label:e.name,value:e.id}}),C=y.default.map(T,function(e){return{label:e.name,value:e.id}}),_=[{label:"标准",value:"standard"},{label:"子任务",value:"subtask"}];return c.default.createElement(f.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(f.Modal.Header,{closeButton:!0},c.default.createElement(f.Modal.Title,{id:"contained-modal-title-la"},"创建问题类型")),c.default.createElement("form",{onSubmit:h(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(f.Modal.Body,null,c.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:n.touched&&n.error?"error":null},c.default.createElement(f.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(f.FormControl,l({disabled:w,type:"text"},n,{placeholder:"问题类型名"})),n.touched&&n.error&&c.default.createElement(f.HelpBlock,{style:{"float":"right"}},n.error)),c.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:r.touched&&r.error?"error":null},c.default.createElement(f.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"缩码"),c.default.createElement(f.FormControl,l({disabled:w,type:"text"},r,{placeholder:"缩码(一个字母或数字)"})),r.touched&&r.error&&c.default.createElement(f.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(f.FormGroup,{controlId:"formControlsSelect"},c.default.createElement(f.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"界面"),c.default.createElement(m.default,{disabled:w,options:k,simpleValue:!0,clearable:!1,value:o.value,onChange:function(e){o.onChange(e)},placeholder:"请选择一个界面"})),c.default.createElement(f.FormGroup,{controlId:"formControlsSelect"},c.default.createElement(f.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"工作流"),c.default.createElement(m.default,{disabled:w,options:C,simpleValue:!0,clearable:!1,value:i.value,onChange:function(e){i.onChange(e)},placeholder:"请选择一个工作流"})),c.default.createElement(f.FormGroup,{controlId:"formControlsSelect"},c.default.createElement(f.ControlLabel,null,"类型"),c.default.createElement(m.default,{disabled:w,options:_,simpleValue:!0,clearable:!1,value:s.value||"standard",onChange:function(e){s.onChange(e)},placeholder:"请选择问题类型"})),c.default.createElement(f.FormGroup,{controlId:"formControlsText"},c.default.createElement(f.ControlLabel,null,"描述"),c.default.createElement(f.FormControl,l({disabled:w,type:"text"},u,{placeholder:"描述"})))),c.default.createElement(f.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!w&&t[this.state.ecode]),c.default.createElement("img",{src:v,className:w?"loading":"hide"}),c.default.createElement(f.Button,{disabled:w||b,type:"submit"},"确定"),c.default.createElement(f.Button,{bsStyle:"link",disabled:w,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,options:u.PropTypes.object.isRequired,resetForm:u.PropTypes.func.isRequired,create:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"type",fields:["name","abb","screen_id","workflow_id","type","description"],validate:w})(t)||t}(u.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},2012:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(2),d=a(5),f=a(4),p=function(e){function t(e){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return o(t,e),l(t,[{key:"confirm",value:function(){var e,t,a,n,r,o,l,i;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=this.props,t=e.close,a=e.del,n=e.update,r=e.data,o=e.operation,l=e.loading,i=0,"disable"!=o){s.next=15;break}return s.next=11,regeneratorRuntime.awrap(n({id:r.id,disabled:!0}));case 11:i=s.sent,0===i?d.notify.show("禁用成功。","success",2e3):d.notify.show("禁用失败。","error",2e3),s.next=26;break;case 15:if("enable"!=o){s.next=22;break}return s.next=18,regeneratorRuntime.awrap(n({id:r.id,disabled:!1}));case 18:i=s.sent,0===i?d.notify.show("启用成功。","success",2e3):d.notify.show("启用失败。","error",2e3),s.next=26;break;case 22:return s.next=24,regeneratorRuntime.awrap(a(r.id));case 24:i=s.sent,0===i?d.notify.show("删除完成。","success",2e3):d.notify.show("删除失败。","error",2e3);case 26:0===i?(this.setState({ecode:0}),t()):this.setState({ecode:i});case 27:case"end":return s.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.data,n=e.operation,r=e.loading,o="";return o="disable"==n?"禁用":"enable"==n?"启用":"删除",u.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},u.default.createElement(c.Modal.Header,{closeButton:!0},u.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},o,"问题类型 - ",a.name)),u.default.createElement(c.Modal.Body,null,"确认要",o,"此问题类型？"),u.default.createElement(c.Modal.Footer,null,u.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!r&&t[this.state.ecode]),u.default.createElement("img",{src:f,className:r?"loading":"hide"}),u.default.createElement(c.Button,{disabled:r,onClick:this.confirm},"确定"),u.default.createElement(c.Button,{bsStyle:"link",disabled:r,onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,close:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,operation:s.PropTypes.string.isRequired,loading:s.PropTypes.bool.isRequired,data:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},2013:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},u=a(1),c=n(u),d=a(8),f=a(2),p=a(7),m=(n(p),a(3)),h=n(m),y=a(5),b=a(4),v=function(e,t){var a={};if(e.name?t.data.name!==e.name&&h.default.findIndex(t.collection||[],{name:e.name})!==-1&&(a.name="该名称已存在"):a.name="必填",e.abb){var n=new RegExp(/^[a-zA-Z0-9]/);n.test(e.abb)?t.data.abb!==e.abb&&h.default.findIndex(t.collection||[],{abb:e.abb})!==-1&&(a.abb="该缩码已存在"):a.abb="格式有误"}else a.abb="必填";return a},w=function(e){function t(e){r(this,a),s(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}o(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;t(l({},a))}},{key:"handleSubmit",value:function(){var e,t,a,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.values,a=e.update,n=e.close,o.next=6,regeneratorRuntime.awrap(a(t));case 6:r=o.sent,0===r?(this.setState({ecode:0}),n(),y.notify.show("更新完成。","success",2e3)):this.setState({ecode:r});case 8:case"end":return o.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,n=a.id,r=a.name,o=a.abb,i=a.description,s=e.handleSubmit,u=e.invalid,d=e.dirty,p=e.submitting,m=e.data;return o.value&&(o.value=o.value.toUpperCase(),o.value=o.value.substring(0,1)),c.default.createElement(f.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(f.Modal.Header,{closeButton:!0},c.default.createElement(f.Modal.Title,{id:"contained-modal-title-la"},"编辑问题类型 - "+m.name)),c.default.createElement("form",{onSubmit:s(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(f.Modal.Body,null,c.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:r.touched&&r.error?"error":null},c.default.createElement(f.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(f.FormControl,l({type:"hidden"},n)),c.default.createElement(f.FormControl,l({disabled:p,type:"text"},r,{placeholder:"问题类型名"})),r.touched&&r.error&&c.default.createElement(f.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(f.FormGroup,{controlId:"formControlsText",validationState:o.touched&&o.error?"error":null},c.default.createElement(f.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"缩码"),c.default.createElement(f.FormControl,l({disabled:p,type:"text"},o,{placeholder:"缩码(一个字母或数字)"})),o.touched&&o.error&&c.default.createElement(f.HelpBlock,{style:{"float":"right"}},o.error)),c.default.createElement(f.FormGroup,{controlId:"formControlsText"},c.default.createElement(f.ControlLabel,null,"描述"),c.default.createElement(f.FormControl,l({disabled:p,type:"text"},i,{placeholder:"描述"})))),c.default.createElement(f.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!p&&t[this.state.ecode]),c.default.createElement("img",{src:b,className:p?"loading":"hide"}),c.default.createElement(f.Button,{disabled:!d||p||u,type:"submit"},"确定"),c.default.createElement(f.Button,{bsStyle:"link",disabled:p,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:u.PropTypes.object.isRequired,submitting:u.PropTypes.bool,invalid:u.PropTypes.bool,dirty:u.PropTypes.bool,values:u.PropTypes.object,fields:u.PropTypes.object,handleSubmit:u.PropTypes.func.isRequired,close:u.PropTypes.func.isRequired,data:u.PropTypes.object.isRequired,initializeForm:u.PropTypes.func.isRequired,update:u.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"type",fields:["id","name","abb","description"],validate:v})(t)||t}(u.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},2014:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(12),d=a(2),f=a(3),p=n(f),m=a(5),h=a(2011),y=a(115),b=a(4),v=function(e){function t(e){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={createModalShow:!1,sortCardsModalShow:!1,defaultSetShow:!1},this.createModalClose=this.createModalClose.bind(this),this.sortCardsModalClose=this.sortCardsModalClose.bind(this),this.setDefaultValue=this.setDefaultValue.bind(this)}return o(t,e),l(t,[{key:"setDefaultValue",value:function(){var e,t,a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,c.findDOMNode)(this.refs.defaultValue).value,t=this.props.setDefault,n.next=4,regeneratorRuntime.awrap(t({defaultValue:e}));case 4:a=n.sent,0===a?m.notify.show("设置完成。","success",2e3):m.notify.show("设置失败。","error",2e3),this.setState({defaultSetShow:!1});case 7:case"end":return n.stop()}},null,this)}},{key:"createModalClose",value:function(){this.setState({createModalShow:!1})}},{key:"sortCardsModalClose",value:function(){this.setState({sortCardsModalShow:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,n=t.isSysConfig,r=t.create,o=t.setSort,l=t.sortLoading,i=t.defaultLoading,s=t.indexLoading,c=t.collection,f=t.options,m=p.default.findIndex(c,{"default":!0}),v=p.default.reject(p.default.reject(c,{type:"subtask"})||[],{disabled:!0})||[];return u.default.createElement("div",null,u.default.createElement("div",{style:{marginTop:"5px"}},u.default.createElement(d.Button,{className:"create-btn",
onClick:function(){e.setState({createModalShow:!0})}},u.default.createElement("i",{className:"fa fa-plus"})," 新建类型"),!s&&u.default.createElement(d.Button,{className:"create-btn",onClick:function(){e.setState({sortCardsModalShow:!0})}},u.default.createElement("i",{className:"fa fa-edit"})," 编辑顺序"),u.default.createElement("div",{className:s?"hide":"div-default-set"},u.default.createElement("span",{className:"default-set"},"默认类型："),this.state.defaultSetShow?u.default.createElement("div",{className:"default-set"},u.default.createElement("div",{className:"edit-field-content"},u.default.createElement(d.FormControl,{componentClass:"select",type:"text",ref:"defaultValue",disabled:i},v.map(function(e){return u.default.createElement("option",{value:e.id,key:e.id,selected:e.default&&!0},e.name)}))),u.default.createElement("img",{src:b,className:i?"loading":"hide"}),u.default.createElement("div",{className:i?"hide":"edit-field-content edit-button-group"},u.default.createElement(d.Button,{className:"edit-ok-button",onClick:this.setDefaultValue},u.default.createElement("i",{className:"fa fa-check"})),u.default.createElement(d.Button,{className:"edit-cancel-button",onClick:function(){e.setState({defaultSetShow:!1})}},u.default.createElement("i",{className:"fa fa-close"})))):u.default.createElement("span",{className:"default-set editable-field"},u.default.createElement("span",{style:{paddingRight:"10px"}},c[m]?c[m].name:"无"),u.default.createElement(d.Button,{className:"edit-icon",onClick:function(){e.setState({defaultSetShow:!0})}},u.default.createElement("i",{className:"fa fa-pencil"}))))),u.default.createElement("div",{className:"info-col"},u.default.createElement("div",{className:"info-icon"},u.default.createElement("i",{className:"fa fa-info-circle"})),u.default.createElement("div",{className:"info-content"},u.default.createElement("span",null,"每一个问题类型都需要绑定自己的界面和工作流。"),n||u.default.createElement("span",null,u.default.createElement("br",null),"只能删除没有应用到项目问题中的类型，如果将某一类型在创建或编辑问题时移除可使用禁用功能。"),n||u.default.createElement("span",null,u.default.createElement("br",null),"若要创建子任务类型问题，需指定有效的子任务类型的问题类型。"))),this.state.createModalShow&&u.default.createElement(h,{show:!0,close:this.createModalClose,create:r,options:f,collection:c,i18n:a}),this.state.sortCardsModalShow&&u.default.createElement(y,{show:!0,model:"类型",close:this.sortCardsModalClose,cards:c,setSort:o,sortLoading:l,i18n:a}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,isSysConfig:s.PropTypes.bool.isRequired,create:s.PropTypes.func.isRequired,setSort:s.PropTypes.func.isRequired,setDefault:s.PropTypes.func.isRequired,indexLoading:s.PropTypes.bool.isRequired,sortLoading:s.PropTypes.bool.isRequired,defaultLoading:s.PropTypes.bool.isRequired,collection:s.PropTypes.array.isRequired,options:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=v,e.exports=t.default}).call(this)}finally{}},2015:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=o,a=l,n=!0,i=u=void 0}},s=a(1),u=n(s),c=a(29),d=a(2),f=a(7),p=n(f),m=a(5),h=a(3),y=n(h),b=a(2013),v=a(2012),w=a(4),g=function(e){function t(e){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={editModalShow:!1,delNotifyShow:!1,willSetScreenTypeIds:[],settingScreenTypeIds:[],willSetWorkflowTypeIds:[],settingWorkflowTypeIds:[],screen:{},workflow:{},operateShow:!1,operation:"",hoverRowId:""},this.editModalClose=this.editModalClose.bind(this),this.delNotifyClose=this.delNotifyClose.bind(this),this.delNotify=this.delNotify.bind(this)}return o(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props.index;e()}},{key:"editModalClose",value:function(){this.setState({editModalShow:!1})}},{key:"delNotifyClose",value:function(){this.setState({delNotifyShow:!1})}},{key:"edit",value:function(e){this.setState({editModalShow:!0});var t=this.props.select;t(e)}},{key:"delNotify",value:function(e,t){this.setState({delNotifyShow:!0,operation:t});var a=this.props.select;a(e)}},{key:"willSetScreen",value:function(e){this.state.willSetScreenTypeIds.push(e),this.setState({willSetScreenTypeIds:this.state.willSetScreenTypeIds})}},{key:"cancelSetScreen",value:function(e){var t=this.state.willSetScreenTypeIds.indexOf(e);this.state.willSetScreenTypeIds.splice(t,1),this.state.screen[e]=void 0,this.setState({willSetScreenTypeIds:this.state.willSetScreenTypeIds,screen:this.state.screen})}},{key:"setScreen",value:function(e){var t,a,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return this.state.settingScreenTypeIds.push(e),this.setState({settingScreenTypeIds:this.state.settingScreenTypeIds}),t=this.props.update,o.next=5,regeneratorRuntime.awrap(t({screen_id:this.state.screen[e],id:e}));case 5:a=o.sent,0===a?(m.notify.show("设置完成。","success",2e3),n=y.default.indexOf(this.state.willSetScreenTypeIds,e),this.state.willSetScreenTypeIds.splice(n,1),r=y.default.indexOf(this.state.settingScreenTypeIds,e),this.state.settingScreenTypeIds.splice(r,1),this.setState({settingScreenTypeIds:this.state.settingScreenTypeIds,willSetScreenTypeIds:this.state.willSetScreenTypeIds})):(m.notify.show("设置失败。","error",2e3),r=y.default.indexOf(this.state.settingScreenTypeIds,e),this.state.settingScreenTypeIds.splice(r,1),this.setState({settingScreenTypeIds:this.state.settingScreenTypeIds}));case 7:case"end":return o.stop()}},null,this)}},{key:"handleScreenSelectChange",value:function(e,t){this.state.screen[e]=t,this.setState({screen:this.state.screen})}},{key:"willSetWorkflow",value:function(e){this.state.willSetWorkflowTypeIds.push(e),this.setState({willSetWorkflowTypeIds:this.state.willSetWorkflowTypeIds})}},{key:"cancelSetWorkflow",value:function(e){var t=this.state.willSetWorkflowTypeIds.indexOf(e);this.state.willSetWorkflowTypeIds.splice(t,1),this.state.workflow[e]=void 0,this.setState({willSetWorkflowTypeIds:this.state.willSetWorkflowTypeIds,workflow:this.state.workflow})}},{key:"setWorkflow",value:function(e){var t,a,n,r;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return this.state.settingWorkflowTypeIds.push(e),this.setState({settingWorkflowTypeIds:this.state.settingWorkflowTypeIds}),t=this.props.update,o.next=5,regeneratorRuntime.awrap(t({workflow_id:this.state.workflow[e],id:e}));case 5:a=o.sent,0===a?(m.notify.show("设置完成。","success",2e3),n=y.default.indexOf(this.state.willSetWorkflowTypeIds,e),this.state.willSetWorkflowTypeIds.splice(n,1),r=y.default.indexOf(this.state.settingWorkflowTypeIds,e),this.state.settingWorkflowTypeIds.splice(r,1),this.setState({settingWorkflowTypeIds:this.state.settingWorkflowTypeIds,willSetWorkflowTypeIds:this.state.willSetWorkflowTypeIds})):(m.notify.show("设置失败。","error",2e3),r=y.default.indexOf(this.state.settingWorkflowTypeIds,e),this.state.settingWorkflowTypeIds.splice(r,1),this.setState({settingWorkflowTypeIds:this.state.settingWorkflowTypeIds}));case 7:case"end":return o.stop()}},null,this)}},{key:"handleWorkflowSelectChange",value:function(e,t){this.state.workflow[e]=t,this.setState({workflow:this.state.workflow})}},{key:"operateSelect",value:function(e){var t=this.state.hoverRowId;"1"===e?this.edit(t):"2"===e?this.delNotify(t,"del"):"3"===e?this.delNotify(t,"disable"):"4"===e&&this.delNotify(t,"enable")}},{key:"onRowMouseOver",value:function(e){e.id!==this.state.hoverRowId&&this.setState({operateShow:!0,hoverRowId:e.id})}},{key:"onMouseLeave",value:function(){this.setState({operateShow:!1,hoverRowId:""})}},{key:"render",value:function(){for(var e=this.props,t=e.i18n,a=e.isSysConfig,n=e.collection,r=e.selectedItem,o=e.options,l=e.indexLoading,i=e.loading,s=e.del,f=e.update,m=this.state,h=m.operateShow,g=m.hoverRowId,E=m.willSetScreenTypeIds,S=m.settingScreenTypeIds,T=m.willSetWorkflowTypeIds,k=m.settingWorkflowTypeIds,C=u.default.createElement("span",null,u.default.createElement("i",{className:"fa fa-cog"})),_=o.screens,O=void 0===_?[]:_,P=o.workflows,x=void 0===P?[]:P,R=y.default.map(O,function(e){return{label:e.name,value:e.id}}),j=y.default.map(x,function(e){return{label:e.name,value:e.id}}),N=[],M=n.length,I=0;I<M;I++)N.push({id:n[I].id,name:u.default.createElement("div",null,u.default.createElement("span",{className:"table-td-title"},n[I].name,n[I].abb&&" ("+n[I].abb+")",n[I].default&&u.default.createElement("span",{style:{fontWeight:"normal"}}," (默认)"),"subtask"==n[I].type&&u.default.createElement("span",{style:{fontWeight:"normal"}}," (子任务)")),n[I].description&&u.default.createElement("span",{className:"table-td-desc"},n[I].description)),type:u.default.createElement("span",null,"subtask"==n[I].type?"子任务":"标准"),screen:u.default.createElement("div",null,y.default.indexOf(E,n[I].id)===-1&&y.default.indexOf(S,n[I].id)===-1?u.default.createElement("div",{className:"editable-list-field"},u.default.createElement("div",{style:{display:"table",width:"100%"}},n[I].screen_id?u.default.createElement("span",null,u.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"5px 3px"}},y.default.find(O,{id:n[I].screen_id})?y.default.find(O,{id:n[I].screen_id}).name:"-")):"-",u.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:this.willSetScreen.bind(this,n[I].id)},u.default.createElement("i",{className:"fa fa-pencil"})))):u.default.createElement("div",null,u.default.createElement(p.default,{simpleValue:!0,clearable:!1,searchable:!1,disabled:y.default.indexOf(S,n[I].id)!==-1&&!0,options:R,value:this.state.screen[n[I].id]||n[I].screen_id,onChange:this.handleScreenSelectChange.bind(this,n[I].id),placeholder:"请选择界面"}),u.default.createElement("div",{className:y.default.indexOf(S,n[I].id)!==-1?"hide":"edit-button-group"},u.default.createElement(d.Button,{className:"edit-ok-button",onClick:this.setScreen.bind(this,n[I].id)},u.default.createElement("i",{className:"fa fa-check"})),u.default.createElement(d.Button,{className:"edit-cancel-button",onClick:this.cancelSetScreen.bind(this,n[I].id)},u.default.createElement("i",{className:"fa fa-close"})))),u.default.createElement("img",{src:w,style:{"float":"right"},className:y.default.indexOf(S,n[I].id)!==-1?"loading":"hide"})),workflow:u.default.createElement("div",null,y.default.indexOf(T,n[I].id)===-1&&y.default.indexOf(k,n[I].id)===-1?u.default.createElement("div",{className:"editable-list-field"},u.default.createElement("div",{style:{display:"table",width:"100%"}},n[I].workflow_id?u.default.createElement("span",null,u.default.createElement("div",{style:{display:"inline-block","float":"left",margin:"5px 3px"}},y.default.find(x,{id:n[I].workflow_id})?y.default.find(x,{id:n[I].workflow_id}).name:"-")):"-",u.default.createElement("span",{className:"edit-icon-zone edit-icon",onClick:this.willSetWorkflow.bind(this,n[I].id)},u.default.createElement("i",{className:"fa fa-pencil"})))):u.default.createElement("div",null,u.default.createElement(p.default,{simpleValue:!0,clearable:!1,searchable:!1,disabled:y.default.indexOf(k,n[I].id)!==-1&&!0,options:j,value:this.state.workflow[n[I].id]||n[I].workflow_id,onChange:this.handleWorkflowSelectChange.bind(this,n[I].id),placeholder:"请选择工作流"}),u.default.createElement("div",{className:y.default.indexOf(k,n[I].id)!==-1?"hide":"edit-button-group"},u.default.createElement(d.Button,{className:"edit-ok-button",onClick:this.setWorkflow.bind(this,n[I].id)},u.default.createElement("i",{className:"fa fa-check"})),u.default.createElement(d.Button,{className:"edit-cancel-button",onClick:this.cancelSetWorkflow.bind(this,n[I].id)},u.default.createElement("i",{className:"fa fa-close"})))),u.default.createElement("img",{src:w,style:{"float":"right"},className:y.default.indexOf(k,n[I].id)!==-1?"loading":"hide"})),status:u.default.createElement("span",null,n[I].disabled?u.default.createElement(d.Label,null,"无效"):u.default.createElement(d.Label,{bsStyle:"success"},"有效")),operation:u.default.createElement("div",null,h&&g===n[I].id&&u.default.createElement(d.DropdownButton,{pullRight:!0,bsStyle:"link",style:{textDecoration:"blink",color:"#000"},key:I,title:C,id:"dropdown-basic-"+I,onSelect:this.operateSelect.bind(this)},u.default.createElement(d.MenuItem,{eventKey:"1"},"编辑"),!n[I].is_used&&u.default.createElement(d.MenuItem,{eventKey:"2"},"删除"),!a&&n[I].disabled&&u.default.createElement(d.MenuItem,{eventKey:"4"},"启用"),!a&&!n[I].disabled&&u.default.createElement(d.MenuItem,{eventKey:"3"},"禁用")))});var F={};return l?F.noDataText=u.default.createElement("div",null,u.default.createElement("img",{src:w,className:"loading"})):F.noDataText="暂无数据显示。",F.onRowMouseOver=this.onRowMouseOver.bind(this),u.default.createElement("div",{style:{marginBottom:"30px"}},u.default.createElement(c.BootstrapTable,{data:N,bordered:!1,hover:!0,options:F,trClassName:"tr-middle"},u.default.createElement(c.TableHeaderColumn,{dataField:"id",hidden:!0,isKey:!0},"ID"),u.default.createElement(c.TableHeaderColumn,{dataField:"name"},"名称"),u.default.createElement(c.TableHeaderColumn,{dataField:"screen"},"界面"),u.default.createElement(c.TableHeaderColumn,{dataField:"workflow"},"工作流"),u.default.createElement(c.TableHeaderColumn,{width:"100",dataField:"status"},"状态"),u.default.createElement(c.TableHeaderColumn,{width:"60",dataField:"operation"})),this.state.editModalShow&&u.default.createElement(b,{show:!0,close:this.editModalClose,update:f,data:r,options:o,collection:n,i18n:t}),this.state.delNotifyShow&&u.default.createElement(v,{show:!0,close:this.delNotifyClose,data:r,loading:i,del:s,update:f,operation:this.state.operation,i18n:t}))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,isSysConfig:s.PropTypes.bool.isRequired,collection:s.PropTypes.array.isRequired,selectedItem:s.PropTypes.object.isRequired,loading:s.PropTypes.bool.isRequired,indexLoading:s.PropTypes.bool.isRequired,index:s.PropTypes.func.isRequired,select:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired,del:s.PropTypes.func.isRequired,options:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t.default=g,e.exports=t.default}).call(this)}finally{}},2091:function(e,t,a){try{(function(){"use strict";function e(e,t){return(0,u.asyncFuncCreator)({constant:"TYPE_INDEX",promise:function(t){return t.request({url:"/project/"+e+"/type"})}})}function n(e,t){return(0,u.asyncFuncCreator)({constant:"TYPE_CREATE",promise:function(a){return a.request({url:"/project/"+e+"/type",method:"post",data:t})}})}function r(e,t){return(0,u.asyncFuncCreator)({constant:"TYPE_UPDATE",promise:function(a){return a.request({url:"/project/"+e+"/type/"+t.id,method:"put",data:t})}})}function o(e){return{type:"TYPE_SELECT",id:e}}function l(e,t){return(0,u.asyncFuncCreator)({constant:"TYPE_DELETE",id:t,promise:function(a){return a.request({url:"/project/"+e+"/type/"+t,method:"delete"})}})}function i(e,t){return(0,u.asyncFuncCreator)({constant:"TYPE_SET_SORT",promise:function(a){return a.request({url:"/project/"+e+"/type/batch",method:"post",data:t})}})}function s(e,t){return(0,u.asyncFuncCreator)({constant:"TYPE_SET_DEFAULT",promise:function(a){return a.request({url:"/project/"+e+"/type/batch",method:"post",data:t})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.index=e,t.create=n,t.update=r,t.select=o,t.del=l,t.setSort=i,t.setDefault=s;var u=a(26)}).call(this)}finally{}}});
//# sourceMappingURL=type-b962c7c6682c60f82bdd.js.map